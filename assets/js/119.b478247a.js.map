{"version":3,"sources":["webpack:///./docs/cache-pdp/hystrix/086.md","webpack:///./docs/cache-pdp/hystrix/086.md?5dc1","webpack:///./docs/cache-pdp/hystrix/assets/markdown-img-paste-20190530221029391.png","webpack:///./docs/cache-pdp/hystrix/assets/markdown-img-paste-20190530221045495.png","webpack:///./docs/cache-pdp/hystrix/086.md?962b"],"names":[],"mappings":"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","file":"assets/js/119.b478247a.js","sourcesContent":["import { render, staticRenderFns } from \"./086.md?vue&type=template&id=573f8f68&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"2e9acca5-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../node_modules/@vuepress/markdown-loader/index.js??ref--1-2!./086.md?vue&type=template&id=573f8f68&\"","module.exports = __webpack_public_path__ + \"assets/img/markdown-img-paste-20190530221029391.d0da5187.png\";","module.exports = __webpack_public_path__ + \"assets/img/markdown-img-paste-20190530221045495.5b040d32.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"_086-电商网站的商品详情页缓存服务业务背景以及框架结构说明\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_086-电商网站的商品详情页缓存服务业务背景以及框架结构说明\"}},[_vm._v(\"#\")]),_vm._v(\" 086. 电商网站的商品详情页缓存服务业务背景以及框架结构说明\")]),_vm._v(\" \"),_c('div',{staticClass:\"custom-block tip\"},[_c('p',{staticClass:\"custom-block-title\"},[_vm._v(\"TIP\")]),_vm._v(\" \"),_c('p',[_vm._v(\"《亿级流量电商详情页系统的大型高并发与高可用缓存架构实战》\")]),_vm._v(\" \"),_c('p',[_vm._v(\"本笔记中会忽略这种独立章节的解释内容，本章内容是整套教程中的一部分。后续不再解释\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"我们这个课程，基于 hystrix，如何来构建高可用的分布式系统的架构，项目实战\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"大背景：电商网站、首页、商品详情页、搜索结果页、广告页、促销活动、购物车、订单系统、库存系统、物流系统；电商里面系统太多了\")]),_vm._v(\" \"),_c('li',[_vm._v(\"小背景：商品详情页，如何用最快的结果将商品数据填充到一个页面中，然后将页面显示出来\")]),_vm._v(\" \"),_c('li',[_vm._v(\"分布式系统：商品详情页中的缓存服务，+ 底层源数据服务，商品信息服务，店铺信息服务，广告信息服务，推荐信息服务，综合起来组成一个分布式的系统\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"我们主要是讲解商品详情页中的缓存架构。在该背景下进行讲解；\")]),_vm._v(\" \"),_c('div',{staticClass:\"custom-block tip\"},[_c('p',{staticClass:\"custom-block-title\"},[_vm._v(\"TIP\")]),_vm._v(\" \"),_c('p',[_vm._v(\"该章节的背景介绍在前面已经讲解过，本人不会写笔记，直接使用原始笔记润色\")])]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"电商网站的商品详情页系统架构\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#电商网站的商品详情页系统架构\"}},[_vm._v(\"#\")]),_vm._v(\" 电商网站的商品详情页系统架构\")]),_vm._v(\" \"),_c('ol',[_c('li',[_c('p',[_vm._v(\"小型电商网站的商品详情页系统架构（不是我们要讲解的）\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"./assets/markdown-img-paste-20190530221029391.png\"),\"alt\":\"\"}})])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"大型电商网站的商品详情页系统架构\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"./assets/markdown-img-paste-20190530221045495.png\"),\"alt\":\"\"}})])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"页面模板\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-html line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-html\"}},[_c('code',[_vm._v(\"举个例子\\n\\n将数据动态填充/渲染到一个 html 模板中，是什么意思呢？\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_vm._v(\"html\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"\\n\\t\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_vm._v(\"title\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"#{name}的页面\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"</\")]),_vm._v(\"title\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"\\n\\t\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_vm._v(\"body\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"\\n\\t\\t商品的价格是：#{price}\\n\\t\\t商品的介绍：#{description}\\n\\t\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"</\")]),_vm._v(\"body\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"</\")]),_vm._v(\"html\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"\\n\\n上面这个就可以认为是一个页面模板，里面的很多内容是不确定的，#{name}，#{price}，#{description}，这都是一些模板脚本，不确定里面的值是什么？\\n\\n将数据填充/渲染到 html 模板中，是什么意思呢？\\n\\n{\\n\\t\\\"name\\\": \\\"iphone7 plus（玫瑰金+32G）\\\",\\n\\t\\\"price\\\": 5599.50\\n\\t\\\"description\\\": \\\"这个手机特别好用。。。。。。\\\"\\n}\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_vm._v(\"html\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"\\n\\t\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_vm._v(\"title\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"iphone7 plus（玫瑰金+32G）的页面\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"</\")]),_vm._v(\"title\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"\\n\\t\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_vm._v(\"body\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"\\n\\t\\t商品的价格是：5599.50\\n\\t\\t商品的介绍：这个手机特别好用。。。。。。\\n\\t\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"</\")]),_vm._v(\"body\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token tag\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"</\")]),_vm._v(\"html\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\"\\n上面这个就是一份填充好数据的一个html页面\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"24\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"25\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"26\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"27\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"28\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"29\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"30\")]),_c('br')])])])]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"缓存服务\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#缓存服务\"}},[_vm._v(\"#\")]),_vm._v(\" 缓存服务\")]),_vm._v(\" \"),_c('p',[_vm._v(\"缓存服务，订阅一个 MQ 的消息变更，如果有消息变更的话，那么就会发送一个网络请求，调用一个底层的对应的源数据服务的接口，去获取变更后的数据\")]),_vm._v(\" \"),_c('p',[_vm._v(\"将获取到的变更后的数据填充到分布式的 redis 缓存中去\")]),_vm._v(\" \"),_c('p',[_vm._v(\"高可用这一块儿，最可能出现说可用性不高的情况，是什么呢？就是说，在接收到消息之后，可能在调用各种底层依赖服务的接口时，会遇到各种不稳定的情况\")]),_vm._v(\" \"),_c('p',[_vm._v(\"比如底层服务的接口调用超时，预计 200ms 内返回，但是 2s 都没有返回; 底层服务的接口调用失败，比如说卡了 500ms 之后，返回一个报错\")]),_vm._v(\" \"),_c('p',[_vm._v(\"在分布式系统中，对于这种大量的底层依赖服务的调用，就可能会出现各种可用性的问题，一旦没有处理好的话，可能就会导致缓存服务自己本身会挂掉，或者故障掉，就会导致什么呢？不可以对外提供服务，严重情况下，甚至会导致说整个商品详情页显示不出来\")]),_vm._v(\" \"),_c('p',[_c('strong',[_vm._v(\"hystrix 的主题是\")]),_vm._v(\"：缓存服务接收到变更消息后，去调用各个底层依赖服务时的\"),_c('strong',[_vm._v(\"高可用架构的实现\")])]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"框架结构\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#框架结构\"}},[_vm._v(\"#\")]),_vm._v(\" 框架结构\")]),_vm._v(\" \"),_c('p',[_vm._v(\"围绕着缓存服务去拉取各种底层的源数据服务的数据，调用其接口时，可能出现的系统不可用的问题\")]),_vm._v(\" \"),_c('p',[_vm._v(\"在框架上一切从简：动手搭建 2 个 spring boot 服务，缓存服务和商品服务，缓存服务依赖于商品服务\")]),_vm._v(\" \"),_c('p',[_vm._v(\"模拟各种商品服务可能接口调用时出现的各种问题，导致系统不可用的场景，然后用 hystrix 完整的各种技术点全部贯穿在里面，解决了一大堆设计业务背景下的系统不可用问题，hystrix 整个技术体系，知识体系，也就讲解完了\")]),_vm._v(\" \"),_c('p',[_vm._v(\"消息队列、redis 咱们都不搞了，只关注这个 hystrix 的场景\")]),_vm._v(\" \"),_c('p',[_vm._v(\"简化的分布式系统的架构：spring boot + http client + hystrix\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}