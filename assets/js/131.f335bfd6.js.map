{"version":3,"sources":["webpack:///./docs/elasticsearch-core/12-lateral-capacity.md","webpack:///./docs/elasticsearch-core/12-lateral-capacity.md?b774","webpack:///./docs/elasticsearch-core/assets/markdown-img-paste-20190101145206937.png","webpack:///./docs/elasticsearch-core/assets/markdown-img-paste-20190101150125942.png","webpack:///./docs/elasticsearch-core/12-lateral-capacity.md?ebe0"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAiG;AACjG;;;AAGA;AAC0F;AAC1F,gBAAgB,2GAAU;AAC1B;AACA,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,gF;;;;;;;;;;;;ACjBf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA,iBAAiB,qBAAuB,kE;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,kE;;;;;;;;;;;;ACAxC;AAAA;AAAA;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,qCAAqC,OAAO,gCAAgC,WAAW,OAAO,iBAAiB,UAAU,mCAAmC,oBAAoB,k1BAAk1B,OAAO,MAAM,mBAAO,CAAC,oIAAmD,YAAY,0RAA0R,OAAO,WAAW,UAAU,mCAAmC,cAAc,gOAAgO,OAAO,MAAM,mBAAO,CAAC,oIAAmD,YAAY;AAC10D","file":"assets/js/131.f335bfd6.js","sourcesContent":["import { render, staticRenderFns } from \"./12-lateral-capacity.md?vue&type=template&id=38ce9e50&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"2e9acca5-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??ref--1-1!../../node_modules/@vuepress/markdown-loader/index.js??ref--1-2!./12-lateral-capacity.md?vue&type=template&id=38ce9e50&\"","module.exports = __webpack_public_path__ + \"assets/img/markdown-img-paste-20190101145206937.82d6c913.png\";","module.exports = __webpack_public_path__ + \"assets/img/markdown-img-paste-20190101150125942.6469c9a5.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"横向扩容机制浅析\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#横向扩容机制浅析\"}},[_vm._v(\"#\")]),_vm._v(\" 横向扩容机制浅析\")]),_vm._v(\" \"),_c('p',[_vm._v(\"图解横向扩容过程，如何超出扩容极限，以及如何提升容错性\")]),_vm._v(\" \"),_c('ol',[_c('li',[_c('p',[_vm._v(\"primary&replica 自动负载均衡，6个shard，3 primary，3 replica\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"每个 node 有更少的 shard，IO/CPU/Memory 资源给每个 shard 分配更多，每个 shard 性能更好\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"扩容的极限，6个 shard（3 primary，3 replica），最多扩容到 6台 机器，每个 shard 可以占用单台服务器的所有资源，性能最好\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"超出扩容极限，动态修改 replica 数量，9个 shard（3primary，6 replica），扩容到 9台 机器，比 3台 机器时，拥有 3倍 的读吞吐量\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"3台 机器下，9个 shard（3 primary，6 replica），资源更少，但是容错性更好，最多容纳 2台机器宕机，6个 shard 只能容纳 1台 机器宕机\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"这里的这些知识点，你综合起来看，就是说，一方面告诉你扩容的原理，怎么扩容，怎么提升系统整体吞吐量；另一方面要考虑到系统的容错性，怎么保证提高容错性，让尽可能多的服务器宕机，保证数据不丢失\")])])]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"./assets/markdown-img-paste-20190101145206937.png\"),\"alt\":\"\"}})]),_vm._v(\" \"),_c('p',[_vm._v(\"自己总结：\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"横向扩容简单，只需要增加 replica 的数量即可，es 会完成副本的同步\")]),_vm._v(\" \"),_c('li',[_vm._v(\"rep 会可接受读请求，分担 master 的压力\")]),_vm._v(\" \"),_c('li',[_vm._v(\"当副本在每台机器上都存在的时候，容错性增加，但是空间增多，这就是以空间换取性能和容错性\")])]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"纠错\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#纠错\"}},[_vm._v(\"#\")]),_vm._v(\" 纠错\")]),_vm._v(\" \"),_c('p',[_vm._v(\"前面的讲解中，有一个地方说错了：3台 机器，6个 shard，不能有机器宕机；这个说错了。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"看下图：就是一个排列的问题，3 台机器上怎么才能保证至少 2台机器上至少存在一份数据。这个是可以做到的\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"./assets/markdown-img-paste-20190101150125942.png\"),\"alt\":\"\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}