{"version":3,"sources":["webpack:///./docs/cache-pdp/dr/139.md","webpack:///./docs/cache-pdp/dr/139.md?2ef8","webpack:///./docs/cache-pdp/dr/assets/markdown-img-paste-20190721204338990.png","webpack:///./docs/cache-pdp/dr/139.md?273a"],"names":[],"mappings":"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","file":"assets/js/176.528476db.js","sourcesContent":["import { render, staticRenderFns } from \"./139.md?vue&type=template&id=ce3cec06&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"2e9acca5-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../node_modules/@vuepress/markdown-loader/index.js??ref--1-2!./139.md?vue&type=template&id=ce3cec06&\"","module.exports = __webpack_public_path__ + \"assets/img/markdown-img-paste-20190721204338990.735235da.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"_139-商品详情页动态渲染系统-部署双机房一主三从架构的-redis-主集群\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_139-商品详情页动态渲染系统-部署双机房一主三从架构的-redis-主集群\"}},[_vm._v(\"#\")]),_vm._v(\" 139. 商品详情页动态渲染系统：部署双机房一主三从架构的 redis 主集群\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"部署架构\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#部署架构\"}},[_vm._v(\"#\")]),_vm._v(\" 部署架构\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"./assets/markdown-img-paste-20190721204338990.png\"),\"alt\":\"\"}})]),_vm._v(\" \"),_c('p',[_vm._v(\"使用一个 redis 客户端，多份配置文件的方式启动 8 台 redis 实例\")]),_vm._v(\" \"),_c('div',{staticClass:\"language- line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-text\"}},[_c('code',[_vm._v(\"  192.168.99.11 （机房1）              192.168.99.12  （机房2）\\n\\nmaster：6401   master：6402          slave: 6401    slave: 6402   \\nslave: 6403    slave：6404           slave: 6403    slave：6404\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br')])]),_c('p',[_vm._v(\"主从示意如下，一个 master 有一个从，从下面又挂一个从，组成了一个树形结构\")]),_vm._v(\" \"),_c('div',{staticClass:\"language- line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-text\"}},[_c('code',[_vm._v(\"192.168.99.11 master：6401\\n192.168.99.11 slave: 6403 ↑\\n192.168.99.12 slave: 6401 ↑\\n192.168.99.12 slave: 6403 ↑\\n\\n192.168.99.11 master：6402\\n192.168.99.11 slave: 6404 ↑\\n192.168.99.12 slave: 6402 ↑\\n192.168.99.12 slave: 6404 ↑\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br')])]),_c('p',[_vm._v(\"看最上面的示意图。当机房 1 挂掉之后，由于机房 2 的 6401 是机房 1 的 6403 的从，\\n所以机房 2 的 6401 会升级为 master，这样一来，在机房 2 上还是存在一主一从的高可用 redis\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"开始搭建\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#开始搭建\"}},[_vm._v(\"#\")]),_vm._v(\" 开始搭建\")]),_vm._v(\" \"),_c('p',[_vm._v(\"首先要把之前部署的 redis-test 给 kill 掉。在 /usr/local/redis 中安装一个 reds\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_vm._v(\"root@eshop-detail01 local\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# ps -ef | grep redis\")]),_vm._v(\"\\nroot     \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"12126\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"21476\")]),_vm._v(\"  \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0\")]),_vm._v(\" 06:29 pts/4    00:00:00 \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"grep\")]),_vm._v(\" redis\\nroot     \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"31096\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"21476\")]),_vm._v(\"  \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0\")]),_vm._v(\" 02:43 pts/4    00:00:20 /usr/local/redis-test/redis-2.8.19/src/redis-server *:6379                                       \\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_vm._v(\"root@eshop-detail01 local\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# kill -9 31096\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br')])]),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local/redis\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"tar\")]),_vm._v(\" -zxvf redis-2.8.19.tar.gz\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" redis-2.8.19\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"make\")]),_vm._v(\"\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 复制 4 份配置文件，并修改配置文件中的 prot 值为文件名对应的端口号\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local/redis/redis-2.8.19\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"cp\")]),_vm._v(\" redis.conf redis-6401.conf\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"cp\")]),_vm._v(\" redis.conf redis-6402.conf\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"cp\")]),_vm._v(\" redis.conf redis-6403.conf\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"cp\")]),_vm._v(\" redis.conf redis-6404.conf\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 以此启动 redis\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local/redis/redis-2.8.19\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"nohup\")]),_vm._v(\" src/redis-server  redis-6401.conf \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"&\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"nohup\")]),_vm._v(\" src/redis-server  redis-6402.conf \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"&\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"nohup\")]),_vm._v(\" src/redis-server  redis-6403.conf \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"&\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"nohup\")]),_vm._v(\" src/redis-server  redis-6404.conf \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"&\")]),_vm._v(\"\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 查看 redis 进程\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_vm._v(\"root@eshop-detail01 redis-2.8.19\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# ps -ef | grep redis\")]),_vm._v(\"\\nroot     \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"14987\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"21476\")]),_vm._v(\"  \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0\")]),_vm._v(\" 06:38 pts/4    00:00:00 src/redis-server *:6401         \\nroot     \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"14992\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"21476\")]),_vm._v(\"  \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0\")]),_vm._v(\" 06:39 pts/4    00:00:00 src/redis-server *:6402         \\nroot     \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"14999\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"21476\")]),_vm._v(\"  \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0\")]),_vm._v(\" 06:40 pts/4    00:00:00 src/redis-server *:6403         \\nroot     \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"15002\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"21476\")]),_vm._v(\"  \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0\")]),_vm._v(\" 06:40 pts/4    00:00:00 src/redis-server *:6404         \\nroot     \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"15006\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"21476\")]),_vm._v(\"  \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0\")]),_vm._v(\" 06:40 pts/4    00:00:00 \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"grep\")]),_vm._v(\" redis\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"24\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"25\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"26\")]),_c('br')])]),_c('p',[_vm._v(\"配置树形主从，下面是其中一台从节点的配置方式，按照上面讲解的树形结构配置自己的主节点\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local/redis/redis-2.8.19\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_vm._v(\"root@eshop-detail01 redis-2.8.19\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# src/redis-cli -p 6403\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"127.0\")]),_vm._v(\".0.1:640\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_c('span',{pre:true,attrs:{\"class\":\"token file-descriptor important\"}},[_vm._v(\"3\")]),_vm._v(\">\")]),_vm._v(\" slaveof \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"192.168\")]),_vm._v(\".99.11 \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"6401\")]),_vm._v(\"\\nOK\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"127.0\")]),_vm._v(\".0.1:640\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_c('span',{pre:true,attrs:{\"class\":\"token file-descriptor important\"}},[_vm._v(\"3\")]),_vm._v(\">\")]),_vm._v(\" info replication\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# Replication\")]),_vm._v(\"\\nrole:slave\\nmaster_host:192.168.99.11\\nmaster_port:6401\\nmaster_link_status:up\\nmaster_last_io_seconds_ago:1\\nmaster_sync_in_progress:0\\nslave_repl_offset:29\\nslave_priority:100\\nslave_read_only:1\\nconnected_slaves:0\\nmaster_repl_offset:0\\nrepl_backlog_active:0\\nrepl_backlog_size:1048576\\nrepl_backlog_first_byte_offset:0\\nrepl_backlog_histlen:0\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br')])]),_c('p',[_vm._v(\"另外一台也如法炮制启动 4 个 redis 实例，另外一台机器上的 6401 信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_vm._v(\"root@eshop-detail02 redis-2.8.19\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# src/redis-cli -p 6401\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"127.0\")]),_vm._v(\".0.1:640\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_c('span',{pre:true,attrs:{\"class\":\"token file-descriptor important\"}},[_vm._v(\"1\")]),_vm._v(\">\")]),_vm._v(\" info replication\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# Replication\")]),_vm._v(\"\\nrole:slave\\nmaster_host:192.168.99.11  \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 机房 1 的 6403 是 master\")]),_vm._v(\"\\nmaster_port:6403\\nmaster_link_status:up\\nmaster_last_io_seconds_ago:1\\nmaster_sync_in_progress:0\\nslave_repl_offset:85\\nslave_priority:100\\nslave_read_only:1\\nconnected_slaves:1  \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 自己下面又有一个从 节点 6403\")]),_vm._v(\"\\nslave0:ip\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"192.168\")]),_vm._v(\".99.12,port\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"6403\")]),_vm._v(\",state\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"online,offset\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"15\")]),_vm._v(\",lag\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0\")]),_vm._v(\"\\nmaster_repl_offset:15\\nrepl_backlog_active:1\\nrepl_backlog_size:1048576\\nrepl_backlog_first_byte_offset:2\\nrepl_backlog_histlen:14\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br')])]),_c('h2',{attrs:{\"id\":\"验证主从是否生效\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#验证主从是否生效\"}},[_vm._v(\"#\")]),_vm._v(\" 验证主从是否生效\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 在 192.168.99.11 上操作\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local/redis/redis-2.8.19\\nsrc/redis-cli -p \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"6401\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"set\")]),_vm._v(\" k1 v1 \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 去第二台机器上查看是否能获取到值\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"set\")]),_vm._v(\" k1 v2  \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 修改 k1 为 v2 ，再去验证\")]),_vm._v(\"\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 在 192.168.99.12 上操作\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local/redis/redis-2.8.19\\nsrc/redis-cli -p \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"6401\")]),_vm._v(\"\\nget k1    \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 观察是否能获取到值\")]),_vm._v(\"\\n\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br')])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}