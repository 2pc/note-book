{"version":3,"sources":["webpack:///./docs/cache-pdp/dr/140.md","webpack:///./docs/cache-pdp/dr/140.md?f1ad","webpack:///./docs/cache-pdp/dr/assets/markdown-img-paste-20190721212332467.png","webpack:///./docs/cache-pdp/dr/140.md?c45f"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAiF;AACjF;;;AAGA;AAC6F;AAC7F,gBAAgB,2GAAU;AAC1B;AACA,EAAE,6EAAM;AACR,EAAE,sFAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,gF;;;;;;;;;;;;ACjBf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA,iBAAiB,qBAAuB,kE;;;;;;;;;;;;ACAxC;AAAA;AAAA;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,qCAAqC,OAAO,gCAAgC,WAAW,OAAO,6CAA6C,UAAU,mCAAmC,gDAAgD,gGAAgG,OAAO,MAAM,mBAAO,CAAC,8HAAmD,YAAY,mGAAmG,OAAO,+BAA+B,+LAA+L,0CAA0C,YAAY,gBAAgB,yBAAyB,oeAAoe,mCAAmC,aAAa,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,qCAAqC,0BAA0B,mFAAmF,0CAA0C,YAAY,gBAAgB,yBAAyB,sjBAAsjB,mCAAmC,aAAa,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,mKAAmK,+BAA+B,UAAU,iCAAiC;AACj0H","file":"assets/js/177.705b7178.js","sourcesContent":["import { render, staticRenderFns } from \"./140.md?vue&type=template&id=77ce5bd4&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"2e9acca5-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../node_modules/@vuepress/markdown-loader/index.js??ref--1-2!./140.md?vue&type=template&id=77ce5bd4&\"","module.exports = __webpack_public_path__ + \"assets/img/markdown-img-paste-20190721212332467.5bfc483f.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"_140-商品详情页动态渲染系统-给每个机房部署一个-redis-从集群\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_140-商品详情页动态渲染系统-给每个机房部署一个-redis-从集群\"}},[_vm._v(\"#\")]),_vm._v(\" 140. 商品详情页动态渲染系统：给每个机房部署一个 redis 从集群\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"./assets/markdown-img-paste-20190721212332467.png\"),\"alt\":\"\"}})]),_vm._v(\" \"),_c('p',[_vm._v(\"之前的架构中是双机房，一个主集群，一个从集群。在架构链路上，从集群作为缓存中的第二级缓存，\\n\"),_c('RouterLink',{attrs:{\"to\":\"/cache-pdp/dr/134.html\"}},[_vm._v(\"这个在之前的架构中有说明\")])],1),_vm._v(\" \"),_c('p',[_vm._v(\"由于我们把机器压缩了，两个机房的主部署到了一台机器上。这一点不要搞混淆了。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"接下来，再部署两个 redis 从，来看下现在 redis 实例的分布\")]),_vm._v(\" \"),_c('div',{staticClass:\"language- line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-text\"}},[_c('code',[_vm._v(\"                             ← 192.168.99.12 slave: 6405  并列作为 6401 的从\\n192.168.99.11 master：6401   ← 192.168.99.11 slave: 6405\\n192.168.99.11 slave: 6403 ↑\\n192.168.99.12 slave: 6401 ↑\\n192.168.99.12 slave: 6403 ↑\\n\\n                             ← 192.168.99.12 slave: 6406  并列作为 6402 的从\\n192.168.99.11 master：6402   ← 192.168.99.11 slave: 6406\\n192.168.99.11 slave: 6404 ↑\\n192.168.99.12 slave: 6402 ↑\\n192.168.99.12 slave: 6404 ↑\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br')])]),_c('p',[_vm._v(\"来看下挂载的主从信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"language- line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-text\"}},[_c('code',[_vm._v(\"[root@eshop-detail01 redis-2.8.19]# src/redis-cli -p 6401\\n127.0.0.1:6401> info replication\\n# Replication\\nrole:master\\nconnected_slaves:3 # 3 个从，和上面示意的一模一样\\nslave0:ip=192.168.99.11,port=6403,state=online,offset=3007,lag=0 # 树形从\\nslave1:ip=192.168.99.11,port=6405,state=online,offset=3007,lag=0 # 单节点从\\nslave2:ip=192.168.99.12,port=6405,state=online,offset=3007,lag=1 # 机房2单节点从\\nmaster_repl_offset:3007\\nrepl_backlog_active:1\\nrepl_backlog_size:1048576\\nrepl_backlog_first_byte_offset:2\\nrepl_backlog_histlen:3006\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br')])]),_c('p',[_vm._v(\"搭建成功；注意这里部署的 redis 通过主从复制只实现了读写分离，但是并没有实现大数据量的存储，\\n所以后面会使用中间件来把两个主集群结合起来，组成一个分布式 redis 主集群\")]),_vm._v(\" \"),_c('div',{staticClass:\"custom-block tip\"},[_c('p',{staticClass:\"custom-block-title\"},[_vm._v(\"疑问\")]),_vm._v(\" \"),_c('p',[_vm._v(\"现在一个 master 有 3 个从，当 master 挂掉之后，会变成什么样子？\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}