(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[195],{

/***/ "./docs/cache-pdp/redis/033.md":
/*!*************************************!*\
  !*** ./docs/cache-pdp/redis/033.md ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _033_md_vue_type_template_id_5224ea8e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./033.md?vue&type=template&id=5224ea8e& */ "./docs/cache-pdp/redis/033.md?vue&type=template&id=5224ea8e&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");

var script = {}


/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
  script,
  _033_md_vue_type_template_id_5224ea8e___WEBPACK_IMPORTED_MODULE_0__["render"],
  _033_md_vue_type_template_id_5224ea8e___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./docs/cache-pdp/redis/033.md?vue&type=template&id=5224ea8e&":
/*!********************************************************************!*\
  !*** ./docs/cache-pdp/redis/033.md?vue&type=template&id=5224ea8e& ***!
  \********************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_033_md_vue_type_template_id_5224ea8e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib??ref--1-1!../../../node_modules/@vuepress/markdown-loader??ref--1-2!./033.md?vue&type=template&id=5224ea8e& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/redis/033.md?vue&type=template&id=5224ea8e&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_033_md_vue_type_template_id_5224ea8e___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_033_md_vue_type_template_id_5224ea8e___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./docs/cache-pdp/redis/assets/markdown-img-paste-20190328225031586.png":
/*!******************************************************************************!*\
  !*** ./docs/cache-pdp/redis/assets/markdown-img-paste-20190328225031586.png ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/img/markdown-img-paste-20190328225031586.4fcd65a3.png";

/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/redis/033.md?vue&type=template&id=5224ea8e&":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??ref--1-1!./node_modules/@vuepress/markdown-loader??ref--1-2!./docs/cache-pdp/redis/033.md?vue&type=template&id=5224ea8e& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{"slot-key":_vm.$parent.slotKey}},[_c('h1',{attrs:{"id":"_033-redis-在实践中的一些常见问题以及优化思路-包含-linux-内核参数优化"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#_033-redis-在实践中的一些常见问题以及优化思路-包含-linux-内核参数优化"}},[_vm._v("#")]),_vm._v(" 033. redis 在实践中的一些常见问题以及优化思路（包含 linux 内核参数优化）")]),_vm._v(" "),_c('p'),_c('div',{staticClass:"table-of-contents"},[_c('ul',[_c('li',[_c('a',{attrs:{"href":"#fork-耗时导致高并发请求延时"}},[_vm._v("fork 耗时导致高并发请求延时")])]),_c('li',[_c('a',{attrs:{"href":"#aof-的阻塞问题"}},[_vm._v("AOF 的阻塞问题")])]),_c('li',[_c('a',{attrs:{"href":"#主从复制延迟问题"}},[_vm._v("主从复制延迟问题")])]),_c('li',[_c('a',{attrs:{"href":"#主从复制风暴问题"}},[_vm._v("主从复制风暴问题")])]),_c('li',[_c('a',{attrs:{"href":"#vm-overcommit-memory"}},[_vm._v("vm.overcommit_memory")])]),_c('li',[_c('a',{attrs:{"href":"#swapiness"}},[_vm._v("swapiness")])]),_c('li',[_c('a',{attrs:{"href":"#最大打开文件句柄"}},[_vm._v("最大打开文件句柄")])]),_c('li',[_c('a',{attrs:{"href":"#tcp-backlog"}},[_vm._v("tcp backlog")])])])]),_c('p'),_vm._v(" "),_c('p',[_vm._v("基本讲解到现在，大家其实直接到公司里，就可以去搭建 redis 了")]),_vm._v(" "),_c('p',[_vm._v("其实有些东西，也许没有讲解到台细节的一些东西，比如一些参数的设置，这个是因为不同的公司，不同的业务，不同的数据量，可能要调节的参数不同")]),_vm._v(" "),_c('p',[_vm._v("到这里为止，大家就差不多了，按照这个思路，去搭建 redis 支撑高并发、高可用、海量数据的架构，部署。可以用公司里的一些已有的数据，导入进去，几百万，一千万，导入进去，做各种压力测试（使用 redis-benchmark 就可以）、性能、并发、QPS，高可用的演练，每台机器最大能存储多少数据量，横向扩容支撑更多数据")]),_vm._v(" "),_c('p',[_vm._v("基于测试环境还有测试数据，做各种演练，去摸索一些最适合自己的一些细节的东西")]),_vm._v(" "),_c('blockquote',[_c('p',[_vm._v("旁白")])]),_vm._v(" "),_c('p',[_vm._v("你说你靠一套课程，搞定一个技术 100% 的所有的东西，几乎是不可能的")]),_vm._v(" "),_c('p',[_vm._v("师傅领进门，修行在个人")]),_vm._v(" "),_c('p',[_vm._v("一套好的课程，唯一的判断标准，就是在这个价格下，能教会你值得这个价格的一些技术和架构等等知识，是你从其他地方没法学到的，或者自己去学要耗费几倍的时间摸索的")]),_vm._v(" "),_c('p',[_vm._v("这个课程的价值就已经达到了")]),_vm._v(" "),_c('p',[_vm._v("你说你花了几百块钱，买了个课程，要求，课程，学完，立即就是独孤九剑，直接到公司里各种问题都能轻松解决")]),_vm._v(" "),_c('p',[_vm._v("这个世界上，不存在这种课程，所以你需要有一个合理的价值观，我们大家才能有一个非常好的良性的互动的过程")]),_vm._v(" "),_c('p',[_vm._v("之前也左右一些在线课程，比如 spark 等等课程，就有人说为什么没有成为顶尖高手，这就很尴尬了")]),_vm._v(" "),_c('p',[_vm._v("实际学了课程去做项目，100% 会遇到大量自己没想到的问题，遇到了首先就自己尝试去解决，遇到问题，才是你的经验积累")]),_vm._v(" "),_c('p',[_vm._v("遇到了问题，加我的 QQ，然后跟我咨询咨询，我给你看看，也是可以的")]),_vm._v(" "),_c('p',[_vm._v("比如之前的 spark，elasticsearch，java 架构课程，基本上 70%~80% 的问题，我都可以帮你搞定，当然是我能做到的，有些不在现场也许也搞不定，就需要你自己搞定了")]),_vm._v(" "),_c('h2',{attrs:{"id":"fork-耗时导致高并发请求延时"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#fork-耗时导致高并发请求延时"}},[_vm._v("#")]),_vm._v(" fork 耗时导致高并发请求延时")]),_vm._v(" "),_c('p',[_vm._v("RDB 和 AOF 的时候会存在 RDB 快照生成、AOF rewrite，耗费磁盘 IO 的过程")]),_vm._v(" "),_c('p',[_vm._v("主进程 fork 子进程的时候，子进程是需要拷贝父进程的空间内存页表的，也是会耗费一定的时间的")]),_vm._v(" "),_c('p',[_vm._v("一般来说，如果父进程内存有 1 个 G 的数据，那么 fork 可能会耗费在 20ms 左右，如果是 10G~30G，那么就会耗费 20 * 10，甚至 20 * 30，也就是几百毫秒的时间")]),_vm._v(" "),_c('p',[_vm._v("info stats 中的 latest_fork_usec，可以看到最近一次 fork 的时长")]),_vm._v(" "),_c('p',[_vm._v("redis 单机 QPS 一般在几万，fork 可能一下子就会拖慢几万条操作的请求时长，从几毫秒变成 1 秒")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("优化思路")]),_vm._v("：fork 耗时跟 redis 主进程的内存有关系，一般控制 redis 的内存在 10GB 以内；否则 slave -> master 在全量复制等时候就可能会出现一些问题")]),_vm._v(" "),_c('h2',{attrs:{"id":"aof-的阻塞问题"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#aof-的阻塞问题"}},[_vm._v("#")]),_vm._v(" AOF 的阻塞问题")]),_vm._v(" "),_c('p',[_vm._v("redis 将数据写入 AOF 缓冲区，单独开一个线程做 fsync 操作，每秒一次")]),_vm._v(" "),_c('p',[_vm._v("但是 redis 主线程会检查两次 fsync 的时间，如果距离上次 fsync 时间超过了 2 秒，那么写请求就会阻塞")]),_vm._v(" "),_c('p',[_vm._v("everysec，最多丢失 2 秒的数据")]),_vm._v(" "),_c('p',[_vm._v("一旦 fsync 超过 2 秒的延时，整个 redis 就被拖慢")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("优化思路")]),_vm._v("：优化硬盘写入速度，建议采用 SSD，不要用普通的机械硬盘，SSD 大幅度提升磁盘读写的速度")]),_vm._v(" "),_c('h2',{attrs:{"id":"主从复制延迟问题"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#主从复制延迟问题"}},[_vm._v("#")]),_vm._v(" 主从复制延迟问题")]),_vm._v(" "),_c('p',[_vm._v("主从复制可能会超时严重，这个时候需要良好的监控和报警机制")]),_vm._v(" "),_c('p',[_vm._v("在 info replication 中，可以看到 master 和 slave 复制的 offset，做一个差值就可以看到对应的延迟量，如果延迟过多，那么就进行报警（可以写一个 shell 脚本去监控）")]),_vm._v(" "),_c('h2',{attrs:{"id":"主从复制风暴问题"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#主从复制风暴问题"}},[_vm._v("#")]),_vm._v(" 主从复制风暴问题")]),_vm._v(" "),_c('p',[_vm._v("如果一下子让多个 slave 从 master 去执行全量复制，一份大的 rdb 同时发送到多个 slave，会导致网络带宽被严重占用")]),_vm._v(" "),_c('p',[_vm._v("如果一个 master 真的要挂载多个 slave，那尽量用树状结构，不要用星型结构")]),_vm._v(" "),_c('p',[_c('img',{attrs:{"src":__webpack_require__(/*! ./assets/markdown-img-paste-20190328225031586.png */ "./docs/cache-pdp/redis/assets/markdown-img-paste-20190328225031586.png"),"alt":""}})]),_vm._v(" "),_c('p',[_vm._v("树，意思就是说，让一个节点下面的 slave 不要太多，可以通过 replication 的方式去配置")]),_vm._v(" "),_c('p',[_vm._v("如果是在 redis cluster 中应该不会存在这种问题")]),_vm._v(" "),_c('h2',{attrs:{"id":"vm-overcommit-memory"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#vm-overcommit-memory"}},[_vm._v("#")]),_vm._v(" vm.overcommit_memory")]),_vm._v(" "),_c('p',[_vm._v("该信息是在 redis 启动的时候一些警告信息，这些警告信息可以通过调整 linux 内核配置达到性能的优化")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("[root@eshop-cache03 ~]# cat /var/log/redis/7008.log\n1418:M 24 Mar 13:10:59.513 * Increased maximum number of open files to 10032 (it was originally set to 1024).\n1418:M 24 Mar 13:10:59.513 # Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\n1418:M 24 Mar 13:10:59.513 * No cluster configuration found, I'm 728e473d6e5e36ddb051c600c7708f23733c46f7\n                _._                                                  \n           _.-``__ ''-._                                             \n      _.-``    `.  `_.  ''-._           Redis 3.2.8 (00000000/0) 32 bit\n  .-`` .-```.  ```\\/    _.,_ ''-._                                   \n (    '      ,       .-`  | `,    )     Running in cluster mode\n |`-._`-...-` __...-.``-._|'` _.-'|     Port: 7008\n |    `-._   `._    /     _.-'    |     PID: 1418\n  `-._    `-._  `-./  _.-'    _.-'                                   \n |`-._`-._    `-.__.-'    _.-'_.-'|                                  \n |    `-._`-._        _.-'_.-'    |           http://redis.io        \n  `-._    `-._`-.__.-'_.-'    _.-'                                   \n |`-._`-._    `-.__.-'    _.-'_.-'|                                  \n |    `-._`-._        _.-'_.-'    |                                  \n  `-._    `-._`-.__.-'_.-'    _.-'                                   \n      `-._    `-.__.-'    _.-'                                       \n          `-._        _.-'                                           \n              `-.__.-'                                               \n\n1418:M 24 Mar 13:10:59.626 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\n1418:M 24 Mar 13:10:59.626 # Server started, Redis version 3.2.8\n1418:M 24 Mar 13:10:59.626 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\n\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("12")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("13")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("14")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("15")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("16")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("17")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("18")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("19")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("20")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("21")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("22")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("23")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("24")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("25")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("26")]),_c('br')])]),_c('ul',[_c('li',[_vm._v("0: 检查有没有足够内存，没有的话申请内存失败")]),_vm._v(" "),_c('li',[_vm._v("1: 允许使用内存直到用完为止")]),_vm._v(" "),_c('li',[_vm._v("2: 内存地址空间不能超过 swap + 50%")])]),_vm._v(" "),_c('p',[_vm._v("如果是 0 的话，可能导致类似 fork 等操作执行失败，申请不到足够的内存空间")]),_vm._v(" "),_c('p',[_vm._v("下面的命令在日志里面就已经提示出来了")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("cat /proc/sys/vm/overcommit_memory\necho \"vm.overcommit_memory=1\" >> /etc/sysctl.conf\nsysctl vm.overcommit_memory=1\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br')])]),_c('h2',{attrs:{"id":"swapiness"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#swapiness"}},[_vm._v("#")]),_vm._v(" swapiness")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 查看 linux 内核版本")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("cat")]),_vm._v(" /proc/version\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])]),_c('p',[_vm._v("如果 linux 内核版本 ❤️.5，那么 swapiness 设置为0，这样系统宁愿 swap也不会 oom killer（杀掉进程）")]),_vm._v(" "),_c('p',[_vm._v("如果 linux 内核版本 >=3.5，那么 swapiness 设置为 1，这样系统宁愿 swap 也不会 oom killer")]),_vm._v(" "),_c('p',[_vm._v("保证 redis 不会被杀掉")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("echo")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("0")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(">")]),_vm._v(" /proc/sys/vm/swappiness\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("echo")]),_vm._v(" vm.swapiness"),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("0")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(">>")]),_vm._v(" /etc/sysctl.conf\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])]),_c('h2',{attrs:{"id":"最大打开文件句柄"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#最大打开文件句柄"}},[_vm._v("#")]),_vm._v(" 最大打开文件句柄")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("Increased maximum number of open files to 10032 (it was originally set to 1024).\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br')])]),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 如果该命令不可用，可以去百度搜索不同的版本命令")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("ulimit")]),_vm._v(" -n "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("10032")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("10032")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])]),_c('p',[_vm._v("自己去上网搜一下，不同的操作系统，版本，设置的方式都不太一样")]),_vm._v(" "),_c('h2',{attrs:{"id":"tcp-backlog"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#tcp-backlog"}},[_vm._v("#")]),_vm._v(" tcp backlog")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br')])]),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("cat")]),_vm._v(" /proc/sys/net/core/somaxconn\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("echo")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("511")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(">")]),_vm._v(" /proc/sys/net/core/somaxconn\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])])])}
var staticRenderFns = []



/***/ })

}]);
//# sourceMappingURL=195.d154b6e4.js.map