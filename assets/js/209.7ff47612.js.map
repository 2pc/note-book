{"version":3,"sources":["webpack:///./docs/elasticsearch-core/distributed-document/32-query-theory.md","webpack:///./docs/elasticsearch-core/distributed-document/32-query-theory.md?bef6","webpack:///./docs/elasticsearch-core/distributed-document/assets/markdown-img-paste-20190106221035878.png","webpack:///./docs/elasticsearch-core/distributed-document/32-query-theory.md?707e"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAA6F;AAC7F;;;AAGA;AAC6F;AAC7F,gBAAgB,2GAAU;AAC1B;AACA,EAAE,yFAAM;AACR,EAAE,kGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,gF;;;;;;;;;;;;ACjBf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA,iBAAiB,qBAAuB,kE;;;;;;;;;;;;ACAxC;AAAA;AAAA;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,qCAAqC,OAAO,gCAAgC,WAAW,OAAO,4BAA4B,UAAU,mCAAmC,+BAA+B,0uBAA0uB,mCAAmC,UAAU,iCAAiC,qRAAqR,OAAO,MAAM,mBAAO,CAAC,yJAAmD,YAAY;AACh8C","file":"assets/js/209.7ff47612.js","sourcesContent":["import { render, staticRenderFns } from \"./32-query-theory.md?vue&type=template&id=2ae30c8b&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"2e9acca5-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../node_modules/@vuepress/markdown-loader/index.js??ref--1-2!./32-query-theory.md?vue&type=template&id=2ae30c8b&\"","module.exports = __webpack_public_path__ + \"assets/img/markdown-img-paste-20190106221035878.79b98358.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"document-查询内部原理图解揭秘\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#document-查询内部原理图解揭秘\"}},[_vm._v(\"#\")]),_vm._v(\" document 查询内部原理图解揭秘\")]),_vm._v(\" \"),_c('ol',[_c('li',[_c('p',[_vm._v(\"客户端发送请求到任意一个 node，成为 coordinate node\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"coordinate node 对 document 进行路由，将请求转发到对应的 node\")]),_vm._v(\" \"),_c('p',[_vm._v(\"此时会使用 round-robin 随机轮询算法，在 primary shard 以及其所有 replica 中随机选择一个，让读请求负载均衡\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"接收请求的 node 返回 document 给 coordinate node\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"coordinate node 返回 document 给客户端\")])])]),_vm._v(\" \"),_c('p',[_c('strong',[_vm._v(\"特殊情况：\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"document 如果还在建立索引过程中，可能只有 primary shard 有，任何一个 replica shard 都没有，\\n此时可能会导致无法读取到 document，但是 document 完成索引建立之后，primary shard 和 replica shard 就都有了\")]),_vm._v(\" \"),_c('div',{staticClass:\"custom-block warning\"},[_c('p',{staticClass:\"custom-block-title\"},[_vm._v(\"疑问\")]),_vm._v(\" \"),_c('p',[_vm._v(\"对于这种情况没有处理么？在 mysql 的一些读写分离应用中，就会出现这种情况，\")]),_vm._v(\" \"),_c('p',[_vm._v(\"master 写入后，slave 还没有来得及同步，这个时候流量被转发到 slave 的时候无法获取到数据\")]),_vm._v(\" \"),_c('p',[_vm._v(\"一般的做法是：强制走 master；那么对于 es 来说这种场景怎么办？\")])]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"./assets/markdown-img-paste-20190106221035878.png\"),\"alt\":\"\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}