(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[210],{

/***/ "./docs/elasticsearch-core/search-engine/34-search-result-timeout.md":
/*!***************************************************************************!*\
  !*** ./docs/elasticsearch-core/search-engine/34-search-result-timeout.md ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _34_search_result_timeout_md_vue_type_template_id_e38a551a___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./34-search-result-timeout.md?vue&type=template&id=e38a551a& */ "./docs/elasticsearch-core/search-engine/34-search-result-timeout.md?vue&type=template&id=e38a551a&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");

var script = {}


/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
  script,
  _34_search_result_timeout_md_vue_type_template_id_e38a551a___WEBPACK_IMPORTED_MODULE_0__["render"],
  _34_search_result_timeout_md_vue_type_template_id_e38a551a___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./docs/elasticsearch-core/search-engine/34-search-result-timeout.md?vue&type=template&id=e38a551a&":
/*!**********************************************************************************************************!*\
  !*** ./docs/elasticsearch-core/search-engine/34-search-result-timeout.md?vue&type=template&id=e38a551a& ***!
  \**********************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_34_search_result_timeout_md_vue_type_template_id_e38a551a___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib??ref--1-1!../../../node_modules/@vuepress/markdown-loader??ref--1-2!./34-search-result-timeout.md?vue&type=template&id=e38a551a& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/elasticsearch-core/search-engine/34-search-result-timeout.md?vue&type=template&id=e38a551a&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_34_search_result_timeout_md_vue_type_template_id_e38a551a___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_34_search_result_timeout_md_vue_type_template_id_e38a551a___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./docs/elasticsearch-core/search-engine/assets/markdown-img-paste-20190106231310300.png":
/*!***********************************************************************************************!*\
  !*** ./docs/elasticsearch-core/search-engine/assets/markdown-img-paste-20190106231310300.png ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "assets/img/markdown-img-paste-20190106231310300.6ef45c1a.png";

/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/elasticsearch-core/search-engine/34-search-result-timeout.md?vue&type=template&id=e38a551a&":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??ref--1-1!./node_modules/@vuepress/markdown-loader??ref--1-2!./docs/elasticsearch-core/search-engine/34-search-result-timeout.md?vue&type=template&id=e38a551a& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{"slot-key":_vm.$parent.slotKey}},[_c('h1',{attrs:{"id":"search-结果深入解析-timeout-机制揭秘"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#search-结果深入解析-timeout-机制揭秘"}},[_vm._v("#")]),_vm._v(" search 结果深入解析（timeout 机制揭秘）")]),_vm._v(" "),_c('p'),_c('div',{staticClass:"table-of-contents"},[_c('ul',[_c('li',[_c('a',{attrs:{"href":"#搜索结果返回字段含义"}},[_vm._v("搜索结果返回字段含义")])]),_c('li',[_c('a',{attrs:{"href":"#timeout-机制"}},[_vm._v("timeout 机制")])]),_c('li',[_c('a',{attrs:{"href":"#timeout-语法"}},[_vm._v("timeout 语法")])])])]),_c('p'),_vm._v(" "),_c('ol',[_c('li',[_vm._v("我们如果发出一个搜索请求的话，会拿到一堆搜索结果，本节课，我们来讲解一下，这个搜索结果里的各种数据，都代表了什么含义")]),_vm._v(" "),_c('li',[_vm._v("我们来讲解一下，搜索的 timeout 机制，底层的原理，画图讲解")])]),_vm._v(" "),_c('h2',{attrs:{"id":"搜索结果返回字段含义"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#搜索结果返回字段含义"}},[_vm._v("#")]),_vm._v(" 搜索结果返回字段含义")]),_vm._v(" "),_c('div',{staticClass:"language-json line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-json"}},[_c('code',[_vm._v("GET /_search\n\n-------------- 响应\n\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n  "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"took\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("4")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n  "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"timed_out\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token boolean"}},[_vm._v("false")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n  "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"_shards\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"total\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("9")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"successful\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("9")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"failed\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("0")]),_vm._v("\n  "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n  "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"hits\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"total\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("13")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"max_score\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("1")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"hits\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("[")]),_vm._v("\n      "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"_index\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\".kibana\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"_type\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"config\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"_id\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"5.2.0\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"_score\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("1")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"_source\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n          "),_c('span',{pre:true,attrs:{"class":"token property"}},[_vm._v("\"buildNum\"")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v(":")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("14695")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_vm._v("\n      "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("]")]),_vm._v("\n  "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_vm._v("\n  ....\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("12")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("13")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("14")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("15")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("16")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("17")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("18")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("19")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("20")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("21")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("22")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("23")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("24")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("25")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("26")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("27")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("28")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("29")]),_c('br')])]),_c('ul',[_c('li',[_c('p',[_vm._v("took：整个搜索请求花费了多少毫秒")])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("hits.total：本次搜索，返回了几条结果")]),_vm._v(" "),_c('div',{staticClass:"custom-block tip"},[_c('p',{staticClass:"custom-block-title"},[_vm._v("TIP")]),_vm._v(" "),_c('p',[_vm._v("这里解说可能是有问题的，这里的 total 是搜索结果总条数（通过 "),_c('code',[_vm._v("GET /_cat/indices?v")]),_vm._v(" 中的 docs.count 计算对比）")])])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("hits.max_score：本次搜索的所有结果中，最大的相关度分数是多少")]),_vm._v(" "),_c('p',[_vm._v("每一条 document 对于 search 的相关度，越相关，"),_c('code',[_vm._v("_score")]),_vm._v(" 分数越大，排位越靠前")])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("hits.hits：默认查询前 10条 数据，完整数据，"),_c('code',[_vm._v("_score")]),_vm._v(" 降序排序")])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("shards：")]),_vm._v(" "),_c('p',[_vm._v("shards fail 的条件（primary 和 replica 全部挂掉），不影响其他shard。")]),_vm._v(" "),_c('p',[_vm._v("默认情况下来说，一个搜索请求，会打到一个 index 的所有 primary shard 上去，当然了，\n每个 primary shard 都可能会有一个或多个 replic shard，所以请求也可以到 primary shard 的其中一个 replica shard 上去。")])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("timeout：默认无 timeout")])])]),_vm._v(" "),_c('h2',{attrs:{"id":"timeout-机制"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#timeout-机制"}},[_vm._v("#")]),_vm._v(" timeout 机制")]),_vm._v(" "),_c('p',[_vm._v("默认无 timeout ，可以手动指定 timeout， latency completeness （延迟平衡完整性），")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("latency completeness 是什么意思？")])]),_vm._v(" "),_c('p',[_vm._v("我们有些搜索应用，对时间是很敏感的。")]),_vm._v(" "),_c('p',[_vm._v("比如说电商网站，你不能让用户等 10分钟，才能等到一次搜索请求的结果，人早走了")]),_vm._v(" "),_c('p',[_vm._v("timeout 机制：指定每个 shard 就只能在 timeout 时间范围内，将搜索到的部分数据（也有可能是全部搜索到的数据）\n直接返回给 client 程序，而不是等到所有的数据全都搜索出来后再返回")]),_vm._v(" "),_c('p',[_vm._v("确保一次搜索请求可以再用户指定 timeout 时长内完成。为一些时间敏感的搜索应用提供良好的支持")]),_vm._v(" "),_c('p',[_c('img',{attrs:{"src":__webpack_require__(/*! ./assets/markdown-img-paste-20190106231310300.png */ "./docs/elasticsearch-core/search-engine/assets/markdown-img-paste-20190106231310300.png"),"alt":""}})]),_vm._v(" "),_c('p',[_vm._v("简单说：在指定超时时长内返回结果，这个结果可能不是所有结果；")]),_vm._v(" "),_c('h2',{attrs:{"id":"timeout-语法"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#timeout-语法"}},[_vm._v("#")]),_vm._v(" timeout 语法")]),_vm._v(" "),_c('div',{staticClass:"language-json line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-json"}},[_c('code',[_vm._v("GET /_search?timeout=1ms\n\n单位：timeout=10ms，timeout=1s，timeout=1m\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br')])])])}
var staticRenderFns = []



/***/ })

}]);
//# sourceMappingURL=210.bd3e39e5.js.map