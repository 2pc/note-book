{"version":3,"sources":["webpack:///./docs/cache-pdp/040.md","webpack:///./docs/cache-pdp/040.md?e84f","webpack:///./docs/cache-pdp/040.md?e11a"],"names":[],"mappings":"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","file":"assets/js/249.93064bd0.js","sourcesContent":["import { render, staticRenderFns } from \"./040.md?vue&type=template&id=ef9b40ec&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"2e9acca5-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??ref--1-1!../../node_modules/@vuepress/markdown-loader/index.js??ref--1-2!./040.md?vue&type=template&id=ef9b40ec&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"_040-在库存服务中实现缓存与数据库双写一致性保障方案\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_040-在库存服务中实现缓存与数据库双写一致性保障方案\"}},[_vm._v(\"#\")]),_vm._v(\" 040. 在库存服务中实现缓存与数据库双写一致性保障方案\")]),_vm._v(\" \"),_c('p',[_vm._v(\"由于该章节视频是分段录制的，然而整体是写代码耗费的时间，这里合并为一个章节，对应原始视频章节 040、041、042、043\")]),_vm._v(\" \"),_c('div',{staticClass:\"custom-block tip\"},[_c('p',{staticClass:\"custom-block-title\"},[_vm._v(\"TIP\")]),_vm._v(\" \"),_c('p',[_vm._v(\"对于这个案例背景，是简化的，本课程重点是亿级流量高并发缓存架构，\\n代码也是简化的比较简单的能把主要流程走通。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"所以不要对代码有太高的期待，对于实际的代码组织，本人（笔记者）\\n会根据思路理解自行组织，当然大方向还是会跟着视频中的走，部分是在是太乱的代码，\\n会进行重组。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"040~044 章节代码对于自己来说是一个从来没有接触过的思路写法，\\n这个写法单独开辟分支保留了出来 \"),_c('a',{attrs:{\"href\":\"https://github.com/zq99299/cache-pdp/tree/040-044\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"gitHub 传送门\"),_c('OutboundLink')],1)])]),_vm._v(\" \"),_c('p',[_vm._v(\"再来回顾下之前的思路：\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"数据更新：根据唯一标识路由到一个队里中，「删除缓存 + 更新数据」\")]),_vm._v(\" \"),_c('li',[_vm._v(\"数据读取：如果不在缓存中，根据唯一标识路由到一个队里中，「读取数据 + 写入缓存」\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"投入队里之后，就等待结果完成，由于同一个标识路由到的是同一个队列中，\\n所以相当于加锁了。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"下面就来实现这个思路，分几步走：\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"系统初启动时，初始化线程池与内存队列\")]),_vm._v(\" \"),_c('li',[_vm._v(\"两种请求对象封装\")]),_vm._v(\" \"),_c('li',[_vm._v(\"请求异步执行 service 封装\")]),_vm._v(\" \"),_c('li',[_vm._v(\"两种请求 Controller 封装\")]),_vm._v(\" \"),_c('li',[_vm._v(\"读请求去重优化\")]),_vm._v(\" \"),_c('li',[_vm._v(\"空数据读请求过滤优化\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"由于该代码核心的就几个地方，其他的都是基础的业务与数据库的常规操作，\\n故而笔记只记录重点思路地方\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"系统初启动时-初始化线程池与内存队列\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#系统初启动时-初始化线程池与内存队列\"}},[_vm._v(\"#\")]),_vm._v(\" 系统初启动时，初始化线程池与内存队列\")]),_vm._v(\" \"),_c('p',[_vm._v(\"通过 ApplicationRunner 机制，在系统初始化时，对线程池进行初始化操作\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-java line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-java\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"/**\\n * 线程与队列初始化\\n *\\n * @author : zhuqiang\\n * @date : 2019/4/3 22:44\\n */\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Component\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"class\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestQueue\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"implements\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ApplicationRunner\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"List\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" queues \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"new\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayList\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Override\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"void\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"run\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ApplicationArguments\")]),_vm._v(\" args\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"throws\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Exception\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"int\")]),_vm._v(\" workThread \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"10\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ExecutorService\")]),_vm._v(\" executorService \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Executors\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"newFixedThreadPool\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"workThread\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"for\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"int\")]),_vm._v(\" i \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\" i \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"<\")]),_vm._v(\" workThread\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\" i\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"++\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" queue \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"new\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"100\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            executorService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"submit\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"new\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestProcessorThread\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            queues\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"add\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"int\")]),_vm._v(\" index\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" queues\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"get\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"index\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"/**\\n * 处理请求的线程\\n *\\n * @author : zhuqiang\\n * @date : 2019/4/3 22:38\\n */\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"class\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestProcessorThread\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"implements\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Callable\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Boolean\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestProcessorThread\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"this\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"queue \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Override\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Boolean\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"call\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"throws\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Exception\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"try\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"while\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"true\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_vm._v(\" take \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"take\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                take\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"process\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"catch\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"InterruptedException\")]),_vm._v(\" e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"printStackTrace\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"false\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"24\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"25\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"26\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"27\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"28\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"29\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"30\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"31\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"32\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"33\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"34\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"35\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"36\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"37\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"38\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"39\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"40\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"41\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"42\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"43\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"44\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"45\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"46\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"47\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"48\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"49\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"50\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"51\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"52\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"53\")]),_c('br')])]),_c('h2',{attrs:{\"id\":\"两种请求对象封装\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#两种请求对象封装\"}},[_vm._v(\"#\")]),_vm._v(\" 两种请求对象封装\")]),_vm._v(\" \"),_c('p',[_vm._v(\"数据更新请求\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-java line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-java\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"/**\\n * 数据更新请求\\n *\\n * @author : zhuqiang\\n * @date : 2019/4/3 23:05\\n */\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"class\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryDBUpdateRequest\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"implements\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventory\")]),_vm._v(\" productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryService\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryDBUpdateRequest\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventory\")]),_vm._v(\" productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryService\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"this\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"productInventory \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"this\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"productInventoryService \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Override\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"void\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"process\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"//1. 删除缓存\")]),_vm._v(\"\\n        productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"removeProductInventoryCache\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"//2. 更新库存\")]),_vm._v(\"\\n        productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"updateProductInventory\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br')])]),_c('p',[_vm._v(\"数据刷新请求\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-java line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-java\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"/**\\n * 缓存刷新请求\\n *\\n * @author : zhuqiang\\n * @date : 2019/4/6 14:13\\n */\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"class\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryCacheRefreshRequest\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"implements\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Integer\")]),_vm._v(\" productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryService\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryCacheRefreshRequest\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Integer\")]),_vm._v(\" productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryService\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"this\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"productId \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"this\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"productInventoryService \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Override\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"void\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"process\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 1. 读取数据库库存\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventory\")]),_vm._v(\" productInventory \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"findProductInventory\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 2. 设置缓存\")]),_vm._v(\"\\n        productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"setProductInventoryCache\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"24\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"25\")]),_c('br')])]),_c('h2',{attrs:{\"id\":\"请求异步执行-service-封装\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#请求异步执行-service-封装\"}},[_vm._v(\"#\")]),_vm._v(\" 请求异步执行 service 封装\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-java line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-java\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Service\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"class\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestAsyncProcessServiceImpl\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"implements\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestAsyncProcessService\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Autowired\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestQueue\")]),_vm._v(\" requestQueue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Override\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"void\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"process\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_vm._v(\" request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"try\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 1. 根据商品 id 路由到具体的队列\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" queue \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getRoutingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 2. 放入队列\")]),_vm._v(\"\\n            queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"put\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"catch\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"InterruptedException\")]),_vm._v(\" e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"printStackTrace\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getRoutingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Integer\")]),_vm._v(\" productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 先获取 productId 的 hash 值\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"String\")]),_vm._v(\" key \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"String\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"valueOf\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"int\")]),_vm._v(\" h\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"int\")]),_vm._v(\" hash \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"key \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"==\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"?\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"h \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" key\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"hashCode\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"^\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"h \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\">>>\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"16\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 对hash值取模，将hash值路由到指定的内存队列中，比如内存队列大小8\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 用内存队列的数量对hash值取模之后，结果一定是在0~7之间\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 所以任何一个商品id都会被固定路由到同样的一个内存队列中去的\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"int\")]),_vm._v(\" index \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"requestQueue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"queueSize\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"-\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"1\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"&\")]),_vm._v(\" hash\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" requestQueue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"index\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"24\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"25\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"26\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"27\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"28\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"29\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"30\")]),_c('br')])]),_c('h2',{attrs:{\"id\":\"两种请求-controller-封装\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#两种请求-controller-封装\"}},[_vm._v(\"#\")]),_vm._v(\" 两种请求 Controller 封装\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-java line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-java\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"/**\\n * 商品库存\\n *\\n * @author : zhuqiang\\n * @date : 2019/4/6 15:23\\n */\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@RestController\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"class\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryController\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Autowired\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestAsyncProcessService\")]),_vm._v(\" requestAsyncProcessService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Autowired\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryService\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"/**\\n     * 更新商品库存\\n     */\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@RequestMapping\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token string\"}},[_vm._v(\"\\\"/updateProductInventory\\\"\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Response\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"updateProductInventory\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventory\")]),_vm._v(\" productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"try\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryDBUpdateRequest\")]),_vm._v(\" request \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"new\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryDBUpdateRequest\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            requestAsyncProcessService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"process\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"new\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Response\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Response\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"SUCCESS\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"catch\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Exception\")]),_vm._v(\" e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"printStackTrace\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"new\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Response\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Response\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"FAILURE\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@RequestMapping\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token string\"}},[_vm._v(\"\\\"/getProductInventory\\\"\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventory\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductInventory\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Integer\")]),_vm._v(\" productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"try\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 异步获取\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryCacheRefreshRequest\")]),_vm._v(\" request \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"new\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryCacheRefreshRequest\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            requestAsyncProcessService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"process\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventory\")]),_vm._v(\" productInventory \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"long\")]),_vm._v(\" startTime \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"System\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"currentTimeMillis\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"long\")]),_vm._v(\" endTime \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0L\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"long\")]),_vm._v(\" waitTime \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"0L\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 最多等待 200 毫秒\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"while\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"true\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"waitTime \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\">\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"200\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"break\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 尝试去redis中读取一次商品库存的缓存数据\")]),_vm._v(\"\\n                productInventory \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductInventoryCache\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 如果读取到了结果，那么就返回\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productInventory \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"!=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 如果没有读取到结果，那么等待一段时间\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"else\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                    \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Thread\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"sleep\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"20\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                    endTime \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"System\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"currentTimeMillis\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                    waitTime \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" endTime \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"-\")]),_vm._v(\" startTime\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 直接尝试从数据库中读取数据\")]),_vm._v(\"\\n            productInventory \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"findProductInventory\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productInventory \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"!=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"catch\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Exception\")]),_vm._v(\" e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"printStackTrace\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"new\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventory\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"-\")]),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"1L\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"24\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"25\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"26\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"27\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"28\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"29\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"30\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"31\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"32\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"33\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"34\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"35\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"36\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"37\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"38\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"39\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"40\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"41\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"42\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"43\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"44\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"45\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"46\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"47\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"48\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"49\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"50\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"51\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"52\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"53\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"54\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"55\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"56\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"57\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"58\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"59\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"60\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"61\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"62\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"63\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"64\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"65\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"66\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"67\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"68\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"69\")]),_c('br')])]),_c('h2',{attrs:{\"id\":\"读请求去重优化\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#读请求去重优化\"}},[_vm._v(\"#\")]),_vm._v(\" 读请求去重优化\")]),_vm._v(\" \"),_c('p',[_vm._v(\"核心思路是通过：map 来保存写标志\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-java line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-java\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Service\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"class\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestAsyncProcessServiceImpl\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"implements\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestAsyncProcessService\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Autowired\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestQueue\")]),_vm._v(\" requestQueue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Override\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"void\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"process\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_vm._v(\" request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"try\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Map\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Integer\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Boolean\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" flagMap \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" requestQueue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getFlagMap\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 如果是一个更新数据库请求\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"instanceof\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryDBUpdateRequest\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                flagMap\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"put\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"true\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"else\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"instanceof\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryCacheRefreshRequest\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Boolean\")]),_vm._v(\" flag \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" flagMap\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"get\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 系统启动后，就没有写请求，全是读，可能导致 flas = null\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"flag \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"==\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                    flagMap\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"put\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"false\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 已经有过读或写的请求 并且前面已经有一个写请求了\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"flag \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"!=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"&&\")]),_vm._v(\" flag\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                    \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 读取请求把，写请求标志冲掉\")]),_vm._v(\"\\n                    flagMap\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"put\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"false\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 如果是读请求，直接返回，等待写完成即可\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"else\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"flag \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"!=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"&&\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"!\")]),_vm._v(\"flag\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 1. 根据商品 id 路由到具体的队列\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" queue \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getRoutingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 2. 放入队列\")]),_vm._v(\"\\n            queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"put\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"catch\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"InterruptedException\")]),_vm._v(\" e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"printStackTrace\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"24\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"25\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"26\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"27\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"28\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"29\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"30\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"31\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"32\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"33\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"34\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"35\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"36\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"37\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"38\")]),_c('br')])]),_c('h2',{attrs:{\"id\":\"空数据读请求过滤优化\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#空数据读请求过滤优化\"}},[_vm._v(\"#\")]),_vm._v(\" 空数据读请求过滤优化\")]),_vm._v(\" \"),_c('p',[_vm._v(\"上面的逻辑，会让这种场景下的请求不执行，但是在 getProductInventory 中，如果从缓存中没有读取到，则最终会走一次数据库。\")]),_vm._v(\" \"),_c('div',{staticClass:\"language- line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-text\"}},[_c('code',[_vm._v(\"// 系统启动后，就没有写请求，全是读，可能导致 flas = null\\nif (flag == null) {\\n    flagMap.put(request.getProductId(), false);\\n}\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br')])]),_c('p',[_vm._v(\"这里就存在一个 bug 了，会导致缓存一直被穿透，如果没有写请求的话，读请求被去重了，一直请求数据库。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"修复这个 bug 的话，最简单的办法就是在读取数据库后，直接写入缓存中，如果不考虑并发问题的话，直接在 getProductInventory 中读取数据库后写入缓存即可。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"那么就还有一个场景会导致缓存会穿透：数据库中没有这个数据，就会一直走查库的操作，这个问题后续会有解决方案；\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"深入解决去读请求去重优化\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#深入解决去读请求去重优化\"}},[_vm._v(\"#\")]),_vm._v(\" 深入解决去读请求去重优化\")]),_vm._v(\" \"),_c('p',[_vm._v(\"上面的代码存在几个问题：\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"RequestAsyncProcessServiceImpl.process 判定与设置 flag 值在并发情况下会导致 flag 值问题\")]),_vm._v(\" \"),_c('li',[_vm._v(\"查库之后直接写缓存在并发情况下会导致数据不一致的情况（多个请求写数据，队列无意义了）\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"在 ProductInventoryController 中只要走了数据库后，就强制请求刷新缓存\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-java line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-java\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 直接尝试从数据库中读取数据\")]),_vm._v(\"\\nproductInventory \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"findProductInventory\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productInventory \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"!=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 读取到了数据，强制刷新缓存\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryCacheRefreshRequest\")]),_vm._v(\" forceRfreshRequest \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"new\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryCacheRefreshRequest\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"productId\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" productInventoryService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"true\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    requestAsyncProcessService\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"process\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"forceRfreshRequest\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" productInventory\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br')])]),_c('p',[_vm._v(\"每个工作线程，自己处理自己队列的读去重请求\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-java line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-java\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"/**\\n * 处理请求的线程\\n *\\n * @author : zhuqiang\\n * @date : 2019/4/3 22:38\\n */\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"class\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestProcessorThread\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"implements\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Callable\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Boolean\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"/**\\n     * k: 商品 id v：请求标志： true : 有更新请求\\n     */\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"private\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Map\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Integer\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Boolean\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" flagMap \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"new\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ConcurrentHashMap\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"RequestProcessorThread\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ArrayBlockingQueue\")]),_c('span',{pre:true,attrs:{\"class\":\"token generics\"}},[_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"<\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\">\")])]),_vm._v(\" queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"this\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"queue \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token annotation punctuation\"}},[_vm._v(\"@Override\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"public\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Boolean\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"call\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"throws\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Exception\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"try\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"while\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"true\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Request\")]),_vm._v(\" request \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" queue\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"take\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 非强制刷新请求的话，就是一个正常的读请求\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"!\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"isForceRfresh\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                    \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 如果是一个更新数据库请求\")]),_vm._v(\"\\n                    \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"instanceof\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryDBUpdateRequest\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                        flagMap\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"put\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"true\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"else\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"instanceof\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"ProductInventoryCacheRefreshRequest\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                        \"),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"Boolean\")]),_vm._v(\" flag \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" flagMap\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"get\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"flag \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"==\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                            flagMap\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"put\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"false\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n                        \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 已经有过读或写的请求 并且前面已经有一个写请求了\")]),_vm._v(\"\\n                        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"flag \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"!=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"&&\")]),_vm._v(\" flag\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                          \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 读取请求把，写请求标志冲掉\")]),_vm._v(\"\\n                          \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 本次读会正常的执行，组成 1+1 （1 写 1 读）\")]),_vm._v(\"\\n                          \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 后续的正常读请求会被过滤掉\")]),_vm._v(\"\\n                            flagMap\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"put\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"getProductId\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"false\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n                        \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 如果是读请求，直接返回，等待写完成即可\")]),_vm._v(\"\\n                        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"else\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"flag \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"!=\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"&&\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"!\")]),_vm._v(\"flag\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n                            \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"continue\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n                        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n                    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n                \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n                request\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"process\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n            \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"catch\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token class-name\"}},[_vm._v(\"InterruptedException\")]),_vm._v(\" e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n            e\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"printStackTrace\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n        \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token boolean\"}},[_vm._v(\"false\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"24\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"25\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"26\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"27\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"28\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"29\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"30\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"31\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"32\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"33\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"34\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"35\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"36\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"37\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"38\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"39\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"40\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"41\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"42\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"43\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"44\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"45\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"46\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"47\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"48\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"49\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"50\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"51\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"52\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"53\")]),_c('br')])]),_c('p',[_vm._v(\"这样一改造之后，并发的地方，就利用队列串行起来了，那么此代码还存在以下场景的缺陷：\")]),_vm._v(\" \"),_c('ol',[_c('li',[_c('p',[_vm._v(\"当大量请求超过 200 毫秒未获取到缓存，会导致大量请求汇聚到数据库\")]),_vm._v(\" \"),_c('p',[_vm._v(\"这种情况的发生场景有：\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"大量的写请求在前面，导致后续的大量读请求超时，直接读库\")]),_vm._v(\" \"),_c('li',[_vm._v(\"数据库压根就没有这个商品，导致缓存被穿透，一直读库\")])])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"当大量请求超过 200 毫秒后，在数据库获取到了，并请求强制刷新缓存，导致大量请求又回去到数据库了\")]),_vm._v(\" \"),_c('p',[_vm._v(\"这种情况是由于增加了强制刷新标志，导致的另外一个 bug，这个时候的思路可以再增加一个强制刷新队列来做强制读请求去重\")])])]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"总结\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#总结\"}},[_vm._v(\"#\")]),_vm._v(\" 总结\")]),_vm._v(\" \"),_c('p',[_vm._v(\"异步串行化的实现核心思路：\")]),_vm._v(\" \"),_c('ol',[_c('li',[_c('p',[_vm._v(\"使用队列来避免数据竞争\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"删除缓存 + 更新数据库 封装成一个写请求\")]),_vm._v(\" \"),_c('li',[_vm._v(\"读取数据库 + 写缓存 封装成一个读请求\")])])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"根据商品 id 路由到同一个队列中（此方案暂未考虑多服务实例的场景）\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"有写 1+1（1 写 1 读）时，需要过滤掉大量的读请求\")]),_vm._v(\" \"),_c('p',[_vm._v(\"这部分正常读请求如不过滤掉，会进入数据库，且库存并未更新，浪费性能资源与缓存穿透（有数据，且数据已经进入了缓存，但是队列中还一直去数据库执行并刷新缓存）\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"等待读请求需要超时机制，一旦超时则从数据库获取\")]),_vm._v(\" \"),_c('p',[_vm._v(\"此类场景出现的时候可能的原因有如下几点：\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"每个读或写请求测试耗时不准确\")]),_vm._v(\" \"),_c('li',[_vm._v(\"测试不准确导致服务实例不够（当然此章节并未解决多服务实例怎么路由或者解决并发的问题）\")]),_vm._v(\" \"),_c('li',[_vm._v(\"缓存被穿透，使用不存在的数据一致访问\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}