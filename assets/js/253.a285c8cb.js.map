{"version":3,"sources":["webpack:///./docs/cache-pdp/049.md","webpack:///./docs/cache-pdp/049.md?f5d2","webpack:///./docs/cache-pdp/049.md?2921"],"names":[],"mappings":"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","file":"assets/js/253.a285c8cb.js","sourcesContent":["import { render, staticRenderFns } from \"./049.md?vue&type=template&id=6a21d8c1&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"2e9acca5-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??ref--1-1!../../node_modules/@vuepress/markdown-loader/index.js??ref--1-2!./049.md?vue&type=template&id=6a21d8c1&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"_049-zookeeper-kafka-集群的安装部署以及如何简单使用的介绍\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_049-zookeeper-kafka-集群的安装部署以及如何简单使用的介绍\"}},[_vm._v(\"#\")]),_vm._v(\" 049. zookeeper + kafka 集群的安装部署以及如何简单使用的介绍\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"回顾\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#回顾\"}},[_vm._v(\"#\")]),_vm._v(\" 回顾\")]),_vm._v(\" \"),_c('p',[_vm._v(\"多级缓存的架构主要用来解决的问题是：时效高低数据的维度存储\")]),_vm._v(\" \"),_c('p',[_vm._v(\"时效性不高的数据，比如一些商品的基本信息，如果发生了变更，假设在 5 分钟之后再更新到页面中，\\n供用户观察到，也是 ok 的，那么我们采取的是异步更新缓存的策略\")]),_vm._v(\" \"),_c('p',[_vm._v(\"时效性要求很高的数据，如库存，采取的是数据库 + 缓存双写的技术方案，也解决了双写的一致性的问题\")]),_vm._v(\" \"),_c('p',[_vm._v(\"上面这两条可能直接看觉得好像差不多的，这里忽略了一个解释，对于页面来说，需要静态的生成页面，\\n这个过程可能稍微耗时一些，而对于双写来说则快太多了，它不负责页面渲染等工作，只需要把缓存数据更新即可\")]),_vm._v(\" \"),_c('p',[_vm._v(\"缓存数据生产服务，监听一个消息队列，然后数据源服务（商品信息管理服务）发生了数据变更之后，\\n就将数据变更的消息推送到消息队列中\")]),_vm._v(\" \"),_c('p',[_vm._v(\"缓存数据生产服务可以去消费到这个数据变更的消息，然后根据消息的指示提取一些参数，\\n然后调用对应的数据源服务的接口拉取数据，这个时候一般是从 mysql 库中拉去的\")]),_vm._v(\" \"),_c('p',[_vm._v(\"消息队列这里采用的是 kafka，这里选择 kafka 另外一个原因：\\n后面我们还要用 zookeeper 来解决缓存的分布式并发更新的问题（如分布式锁解决）\")]),_vm._v(\" \"),_c('p',[_vm._v(\"而 kafka 集群是依赖 zookeeper 集群，所以先搭建 zookeeper 集群，再搭建 kafka 集群\")]),_vm._v(\" \"),_c('p',[_vm._v(\"zookeeper + kafka 的集群，都至少是三节点\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"老师旁白\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#老师旁白\"}},[_vm._v(\"#\")]),_vm._v(\" 老师旁白\")]),_vm._v(\" \"),_c('p',[_vm._v(\"我工作的时候，很多项目是跟大数据相关的，当然也有很多是纯 java 系统的架构，最近用 kafka 用得比较多\")]),_vm._v(\" \"),_c('p',[_vm._v(\"kafka 比较简单易用，讲课来说，很方便\")]),_vm._v(\" \"),_c('p',[_vm._v(\"解释一下，我们当然是不可能对课程中涉及的各种技术都深入浅出的讲解的了，比如 kafka，花上 20个小时给你讲解一下，不可能的\")]),_vm._v(\" \"),_c('p',[_vm._v(\"所以说呢，在这里，一些技术的组合，用什么都 ok\")]),_vm._v(\" \"),_c('p',[_vm._v(\"笑傲江湖中的风清扬，手中无剑胜有剑，还有任何东西都可以当做兵器，哪怕是一根草也可以\")]),_vm._v(\" \"),_c('p',[_vm._v(\"搞技术，kafka 和 activemq 肯定有区别，但是说，在有些场景下，其实可能没有那么大的区分度，kafka 和 activemq 其实是一样的\")]),_vm._v(\" \"),_c('p',[_vm._v(\"生产者+消费者的场景，kafka + activemq 都 ok\")]),_vm._v(\" \"),_c('p',[_vm._v(\"涉及的这种架构，对时效性要求高和时效性要求低的数据，分别采取什么技术方案？数据库+缓存双写一致性？异步+多级缓存架构？大缓存的维度化拆分？\")]),_vm._v(\" \"),_c('p',[_c('strong',[_vm._v(\"你要关注的，是一些架构上的东西和思想，而不是具体的什么 mq 的使用\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"作为一名架构师，需要宏观的思考，通盘去考虑整个架构，还有未来的技术规划，业务的发展方向，\\n架构的演进方向和路线，站在一个 java 高级工程师的角度来思考的话，就是这么去落地实现，\\n这个侧重点不一样\")]),_vm._v(\" \"),_c('p',[_vm._v(\"把课程里讲解的各种技术方案组合成、修改成你需要的适合你的业务的缓存架构\")]),_vm._v(\" \"),_c('div',{staticClass:\"custom-block warning\"},[_c('p',{staticClass:\"custom-block-title\"},[_vm._v(\"WARNING\")]),_vm._v(\" \"),_c('p',[_vm._v(\"建议不要跟着老师的版本走，如果你一开始所有的版本都跟着走的话，就可以\")]),_vm._v(\" \"),_c('p',[_vm._v(\"否则，请安装最新版的 kafka，因为 kafka 的客户端与 linux 服务端通信的兼容性问题很麻烦，\\n且老版本的配置在 boot 2.x 中不兼容，如果手工安装的话（也就是本笔记跟着老师视频走的），\\n会出现 debug 这个消费者的时候，debug 异常，不知道什么原因\")])]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"zookeeper-集群安装\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#zookeeper-集群安装\"}},[_vm._v(\"#\")]),_vm._v(\" zookeeper 集群安装\")]),_vm._v(\" \"),_c('p',[_vm._v(\"版本：zookeeper-3.4.5.tar.gz\")]),_vm._v(\" \"),_c('p',[_vm._v(\"安装机器：eshop-01、eshop-02、eshop-03\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"wget\")]),_vm._v(\" https://archive.apache.org/dist/zookeeper/zookeeper-3.4.5/zookeeper-3.4.5.tar.gz\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"tar\")]),_vm._v(\" -zxvf zookeeper-3.4.5.tar.gz\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 配置环境变量，原来 .bashrc 才是环境变量的配置处\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"vi\")]),_vm._v(\" ~/.bashrc\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 内容新增\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"export\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token assign-left variable\"}},[_vm._v(\"ZOOKEEPER_HOME\")]),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"/usr/local/zookeeper-3.4.5\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"export\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token assign-left variable\"}},[_c('span',{pre:true,attrs:{\"class\":\"token environment constant\"}},[_vm._v(\"PATH\")])]),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_c('span',{pre:true,attrs:{\"class\":\"token environment constant\"}},[_vm._v(\"$PATH\")]),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\":\")]),_c('span',{pre:true,attrs:{\"class\":\"token variable\"}},[_vm._v(\"$ZOOKEEPER_HOME\")]),_vm._v(\"/bin\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 刷新环境变量配置\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"source\")]),_vm._v(\" ~/.bashrc\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 修改配置文件\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local/zookeeper-3.4.5/conf\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"cp\")]),_vm._v(\" zoo_sample.cfg zoo.cfg\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"vi\")]),_vm._v(\" zoo.cfg\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 涉及到的内容如下\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token assign-left variable\"}},[_vm._v(\"dataDir\")]),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"/usr/local/zookeeper-3.4.5/data\\nserver.0\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"eshop-cache01:2888:3888\\nserver.1\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"eshop-cache02:2888:3888\\nserver.2\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"eshop-cache03:2888:3888\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# data\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"mkdir\")]),_vm._v(\" /usr/local/zookeeper-3.4.5/data\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 编辑集群 id，给一个 0，从 0 开始起\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# vi 一个不存在的文件，保存后就存在了\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local/zookeeper-3.4.5/data\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"vi\")]),_vm._v(\" myid\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"#\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"24\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"25\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"26\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"27\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"28\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"29\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"30\")]),_c('br')])]),_c('p',[_vm._v(\"一台搞定之后，使用 scp 命令把环境变量和 zookper 复制到 02 和 03 上\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# scp --help 中查看支持同时 scp 到多个机器，但是这里尝试一部分成功，一部分失败，所以分开\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" ~/.bashrc root@eshop-cache02:~/\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" ~/.bashrc root@eshop-cache03:~/\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" -r /usr/local/zookeeper-3.4.5 root@eshop-cache02:/usr/local\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" -r /usr/local/zookeeper-3.4.5 root@eshop-cache03:/usr/local\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br')])]),_c('p',[_vm._v(\"复制之后，需要修改的地方有：myid ，分别修改为 1 和 2，唯一即可\")]),_vm._v(\" \"),_c('p',[_vm._v(\"zookper 启动与检查；三台机器都执行操作\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 由于之前配置了环境变量，这里可以任意目录执行\")]),_vm._v(\"\\nzkServer.sh start\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 检查 ZooKeeper 状态：一个 leader，两个 follower\")]),_vm._v(\"\\nzkServer.sh status\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# jps：检查三个节点是否都有 QuromPeerMain 进程\")]),_vm._v(\"\\njps\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br')])]),_c('h2',{attrs:{\"id\":\"scala-安装\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#scala-安装\"}},[_vm._v(\"#\")]),_vm._v(\" scala 安装\")]),_vm._v(\" \"),_c('p',[_vm._v(\"kafka 依赖 scala ，所以需要先安装\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"wget\")]),_vm._v(\" https://downloads.lightbend.com/scala/2.11.12/scala-2.11.12.tgz\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"tar\")]),_vm._v(\" -zxvf scala-2.11.12.tgz\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 配置环境变量，原来 .bashrc 才是环境变量的配置处\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"vi\")]),_vm._v(\" ~/.bashrc\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 内容新增\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"export\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token assign-left variable\"}},[_vm._v(\"SCALA_HOME\")]),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"/usr/local/scala-2.11.12\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"export\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token assign-left variable\"}},[_c('span',{pre:true,attrs:{\"class\":\"token environment constant\"}},[_vm._v(\"PATH\")])]),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_c('span',{pre:true,attrs:{\"class\":\"token environment constant\"}},[_vm._v(\"$PATH\")]),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\":\")]),_c('span',{pre:true,attrs:{\"class\":\"token variable\"}},[_vm._v(\"$SCALA_HOME\")]),_vm._v(\"/bin\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 刷新环境变量配置\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"source\")]),_vm._v(\" ~/.bashrc\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 查看是否已经配置好\")]),_vm._v(\"\\nscala -version\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" ~/.bashrc root@eshop-cache02:~/\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" ~/.bashrc root@eshop-cache03:~/\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" -r /usr/local/scala-2.11.12 root@eshop-cache02:/usr/local/\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" -r /usr/local/scala-2.11.12 root@eshop-cache03:/usr/local/\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br')])]),_c('h2',{attrs:{\"id\":\"kafka-集群\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#kafka-集群\"}},[_vm._v(\"#\")]),_vm._v(\" kafka 集群\")]),_vm._v(\" \"),_c('p',[_vm._v(\"版本：kafka_2.9.2-0.8.1.1.tgz，该版本是 2014 年发布的，很老的一个版本了\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"wget\")]),_vm._v(\" https://archive.apache.org/dist/kafka/0.8.1.1/kafka_2.9.2-0.8.1.1.tgz\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"tar\")]),_vm._v(\" -zxvf kafka_2.9.2-0.8.1.1.tgz\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 配置环境变量，原来 .bashrc 才是环境变量的配置处\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"vi\")]),_vm._v(\" ~/.bashrc\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 内容新增\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"export\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token assign-left variable\"}},[_vm._v(\"KAFKA_HOME\")]),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"/usr/local/kafka_2.9.2-0.8.1.1\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"export\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token assign-left variable\"}},[_c('span',{pre:true,attrs:{\"class\":\"token environment constant\"}},[_vm._v(\"PATH\")])]),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_c('span',{pre:true,attrs:{\"class\":\"token environment constant\"}},[_vm._v(\"$PATH\")]),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\":\")]),_c('span',{pre:true,attrs:{\"class\":\"token variable\"}},[_vm._v(\"$KAFKA_HOME\")]),_vm._v(\"/bin\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 刷新环境变量配置\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"source\")]),_vm._v(\" ~/.bashrc\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br')])]),_c('p',[_vm._v(\"配置 kafka\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"vi\")]),_vm._v(\" /usr/local/kafka_2.9.2-0.8.1.1/config/server.properties\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 涉及到的内容如下\")]),_vm._v(\"\\nbroker.id  \"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 类似 myid。每台机器唯一即可\")]),_vm._v(\"\\nzookeeper.connect\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"192.168\")]),_vm._v(\".99.170:2181,192.168.99.171:2181,192.168.99.172:2181\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br')])]),_c('p',[_vm._v(\"安装 slf4j 日志\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"slf4j-1.7.6.zip 包解压后\")]),_vm._v(\" \"),_c('li',[_vm._v(\"slf4j-nop-1.7.6.jar 包放在 kafka/libs 目录下\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"解决 kafka 启动 报错 Unrecognized VM option 'UseCompressedOops' 问题\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"vi\")]),_vm._v(\" /usr/local/kafka_2.9.2-0.8.1.1/bin/kafka-run-class.sh\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 去掉 -XX:+UseCompressedOops 即可\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_vm._v(\" -z \"),_c('span',{pre:true,attrs:{\"class\":\"token string\"}},[_vm._v(\"\\\"\"),_c('span',{pre:true,attrs:{\"class\":\"token variable\"}},[_vm._v(\"$KAFKA_JVM_PERFORMANCE_OPTS\")]),_vm._v(\"\\\"\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_c('span',{pre:true,attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\" \"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"then\")]),_vm._v(\"\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"token assign-left variable\"}},[_vm._v(\"KAFKA_JVM_PERFORMANCE_OPTS\")]),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_c('span',{pre:true,attrs:{\"class\":\"token string\"}},[_vm._v(\"\\\"-server  -XX:+UseCompressedOops -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:+CMSScavengeBeforeRemark -XX:+DisableExplicitGC -Djava.awt.headless=true\\\"\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token keyword\"}},[_vm._v(\"fi\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br')])]),_c('p',[_vm._v(\"启动命令\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local/kafka_2.9.2-0.8.1.1\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"nohup\")]),_vm._v(\" bin/kafka-server-start.sh config/server.properties \"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"&\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 查看是否启动是否报错\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"cat\")]),_vm._v(\" nohup.out\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br')])]),_c('p',[_vm._v(\"单机启动没有问题后，可以按照之前的方法把环境变量和 kafka 目录 copy 到另外两台机器\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" ~/.bashrc root@eshop-cache02:~/\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" ~/.bashrc root@eshop-cache03:~/\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" -r /usr/local/kafka_2.9.2-0.8.1.1 root@eshop-cache02:/usr/local/\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"scp\")]),_vm._v(\" -r /usr/local/kafka_2.9.2-0.8.1.1 root@eshop-cache03:/usr/local/\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 记得修改每台机器的 broker.id 。修改之后才能启动成功\")]),_vm._v(\"\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br')])]),_c('p',[_vm._v(\"检查集群状态\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"使用 jps 检查启动是否成功\\n\\n使用基本命令检查kafka是否搭建成功\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"cd\")]),_vm._v(\" /usr/local/kafka_2.9.2-0.8.1.1\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 创建测试的 topic，名称为 test\")]),_vm._v(\"\\nbin/kafka-topics.sh --zookeeper \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"192.168\")]),_vm._v(\".99.170:2181,192.168.99.171:2181,192.168.99.172:2181 --topic \"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"test\")]),_vm._v(\" --replication-factor \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"1\")]),_vm._v(\" --partitions \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"1\")]),_vm._v(\" --create\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 生产者和消费者是一个命令行互动程序，所以需要开启两个终端连接\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 在生产者程序中输入字符串发送后，会在消费者上显示出来\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 创建一个生产者\")]),_vm._v(\"\\nbin/kafka-console-producer.sh --broker-list \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"192.168\")]),_vm._v(\".99.170:9092,192.168.99.171:9092,192.168.99.172:9092 --topic \"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"test\")]),_vm._v(\"\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 创建一个消费者\")]),_vm._v(\"\\nbin/kafka-console-consumer.sh --zookeeper \"),_c('span',{pre:true,attrs:{\"class\":\"token number\"}},[_vm._v(\"192.168\")]),_vm._v(\".99.170:2181,192.168.99.171:2181,192.168.99.172:2181 --topic \"),_c('span',{pre:true,attrs:{\"class\":\"token builtin class-name\"}},[_vm._v(\"test\")]),_vm._v(\" --from-beginning\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br')])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}