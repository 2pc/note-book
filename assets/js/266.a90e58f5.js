(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[266],{

/***/ "./docs/cache-pdp/070.md":
/*!*******************************!*\
  !*** ./docs/cache-pdp/070.md ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _070_md_vue_type_template_id_173ecfb8___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./070.md?vue&type=template&id=173ecfb8& */ "./docs/cache-pdp/070.md?vue&type=template&id=173ecfb8&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");

var script = {}


/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
  script,
  _070_md_vue_type_template_id_173ecfb8___WEBPACK_IMPORTED_MODULE_0__["render"],
  _070_md_vue_type_template_id_173ecfb8___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./docs/cache-pdp/070.md?vue&type=template&id=173ecfb8&":
/*!**************************************************************!*\
  !*** ./docs/cache-pdp/070.md?vue&type=template&id=173ecfb8& ***!
  \**************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_070_md_vue_type_template_id_173ecfb8___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib??ref--1-1!../../node_modules/@vuepress/markdown-loader??ref--1-2!./070.md?vue&type=template&id=173ecfb8& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/070.md?vue&type=template&id=173ecfb8&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_070_md_vue_type_template_id_173ecfb8___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_070_md_vue_type_template_id_173ecfb8___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/070.md?vue&type=template&id=173ecfb8&":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??ref--1-1!./node_modules/@vuepress/markdown-loader??ref--1-2!./docs/cache-pdp/070.md?vue&type=template&id=173ecfb8& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{"slot-key":_vm.$parent.slotKey}},[_c('h1',{attrs:{"id":"_070-基于-nginx-lua-完成商品详情页访问流量实时上报-kafka-的开发"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#_070-基于-nginx-lua-完成商品详情页访问流量实时上报-kafka-的开发"}},[_vm._v("#")]),_vm._v(" 070. 基于 nginx+lua 完成商品详情页访问流量实时上报 kafka 的开发")]),_vm._v(" "),_c('p',[_vm._v("本章节要实现的就是：在 nginx 这一层，接收到访问请求的时候，就把请求的流量上报发送给 kafka，\n这样的话，storm 才能去消费 kafka 中的实时的访问日志，然后去进行缓存热数据的统计")]),_vm._v(" "),_c('p',[_vm._v("使用到的 lua 工具包："),_c('a',{attrs:{"href":"https://github.com/doujiang24/lua-resty-kafka","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("lua-resty-kafka"),_c('OutboundLink')],1)]),_vm._v(" "),_c('h2',{attrs:{"id":"安装-lua-resty-kafka"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#安装-lua-resty-kafka"}},[_vm._v("#")]),_vm._v(" 安装 lua-resty-kafka")]),_vm._v(" "),_c('p',[_c('RouterLink',{attrs:{"to":"/cache-pdp/053.html"}},[_vm._v("nginx 三台的作用")]),_vm._v("：")],1),_vm._v(" "),_c('ul',[_c('li',[_vm._v("eshop-01：应用层")]),_vm._v(" "),_c('li',[_vm._v("eshop-02：应用层")]),_vm._v(" "),_c('li',[_vm._v("eshop-03：分发层")])]),_vm._v(" "),_c('p',[_vm._v("我们需要在 01 和 02 应用层上装上该依赖，并编写上报脚本")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" /usr/local/\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("wget")]),_vm._v(" https://github.com/doujiang24/lua-resty-kafka/archive/master.zip\nyum "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v(" -y "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("unzip")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("unzip")]),_vm._v(" master.zip\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# resty 目录下是 kafka 目录，其实就是讲 kafka 目录放到 lualib 中去")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("cp")]),_vm._v(" -rf /usr/local/lua-resty-kafka-master/lib/resty/ /usr/hello/lualib\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 加载依赖包，其实后续写完脚本之后也需要 reload 的")]),_vm._v("\n/usr/servers/nginx/sbin/nginx -s reload\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br')])]),_c('h2',{attrs:{"id":"脚本编写"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#脚本编写"}},[_vm._v("#")]),_vm._v(" 脚本编写")]),_vm._v(" "),_c('p',[_vm._v("在 "),_c('code',[_vm._v("/usr/hello/lua/product.lua")]),_vm._v(" 中增加这段逻辑")]),_vm._v(" "),_c('p',[_vm._v("提示：这种工具类的核心写法，在该工具官网 github 中有示例")]),_vm._v(" "),_c('p',[_vm._v("该段逻辑由于比较独立，可以放在 product.lua 顶部。")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("local cjson = require(\"cjson\")\n-- 引用之前安装的工具包\nlocal producer = require(\"resty.kafka.producer\")\n\nlocal broker_list = {\n  { host = \"192.168.99.170\", port = 9092 },  \n  { host = \"192.168.99.171\", port = 9092 },  \n  { host = \"192.168.99.172\", port = 9092 }\n}\n\n-- 定义日志信息\nlocal log_json = {}\nlog_json[\"headers\"] = ngx.req.get_headers()  \nlog_json[\"uri_args\"] = ngx.req.get_uri_args()  \nlog_json[\"body\"] = ngx.req.read_body()  \nlog_json[\"http_version\"] = ngx.req.http_version()  \nlog_json[\"method\"] =ngx.req.get_method()\nlog_json[\"raw_reader\"] = ngx.req.raw_header()  \nlog_json[\"body_data\"] = ngx.req.get_body_data()\n\n-- 序列化为一个字符串\nlocal message = cjson.encode(log_json);  \n\n-- local offset, err = p:send(\"test\", key, message)\n-- 这里的 key 只是作为消息路由分区使用，kafka 中的概念\nlocal productId = ngx.req.get_uri_args()[\"productId\"]\n-- 异步发送信息\nlocal async_producer = producer:new(broker_list, { producer_type = \"async\" })   \nlocal ok, err = async_producer:send(\"access-log\", productId, message)  \n\nif not ok then  \n    ngx.log(ngx.ERR, \"kafka send err:\", err)  \n    return  \nend\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("12")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("13")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("14")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("15")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("16")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("17")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("18")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("19")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("20")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("21")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("22")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("23")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("24")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("25")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("26")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("27")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("28")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("29")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("30")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("31")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("32")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("33")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("34")]),_c('br')])]),_c('p',[_vm._v("记得需要 "),_c('code',[_vm._v("/usr/servers/nginx/sbin/nginx -s reload")])]),_vm._v(" "),_c('h2',{attrs:{"id":"kafka-topic-创建与消费显示"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#kafka-topic-创建与消费显示"}},[_vm._v("#")]),_vm._v(" kafka topic 创建与消费显示")]),_vm._v(" "),_c('p',[_c('RouterLink',{attrs:{"to":"/cache-pdp/049.html#kafka-集群"}},[_vm._v("详细内容可参考之前的内容")])],1),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" /usr/local/kafka_2.9.2-0.8.1.1\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 创建测试的 topic，名称为 access-log")]),_vm._v("\nbin/kafka-topics.sh --zookeeper "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("192.168")]),_vm._v(".99.170:2181,192.168.99.171:2181,192.168.99.172:2181 --topic access-log --replication-factor "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("1")]),_vm._v(" --partitions "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("1")]),_vm._v(" --create\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 创建一个消费者")]),_vm._v("\nbin/kafka-console-consumer.sh --zookeeper "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("192.168")]),_vm._v(".99.170:2181,192.168.99.171:2181,192.168.99.172:2181 --topic access-log --from-beginning\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br')])]),_c('h2',{attrs:{"id":"测试脚本是否达到正常效果"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#测试脚本是否达到正常效果"}},[_vm._v("#")]),_vm._v(" 测试脚本是否达到正常效果")]),_vm._v(" "),_c('p',[_vm._v("记得后端缓存服务需要启动，nginx 本地缓存是有过期时间的，过期后就会去请求后端服务了")]),_vm._v(" "),_c('p',[_vm._v("访问地址："),_c('code',[_vm._v("http://eshop-cache03/product?method=product&productId=1&shopId=1")])]),_vm._v(" "),_c('p',[_vm._v("页面能正常看到商品信息，但是 kafka consumer 无信息")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("# 查看 nginx 的错误日志发现\ntail -f /usr/servers/nginx/logs/error.log\n\n2019/05/07 20:14:49 [error] 9888#0: [lua] producer.lua:258: buffered messages send to kafka err: no resolver defined to resolve \"eshop-cache01\", retryable: true, topic: access-log, partition_id: 0, length: 1, context: ngx.timer, client: 192.168.99.172, server: 0.0.0.0:80\n\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br')])]),_c('div',{staticClass:"custom-block tip"},[_c('p',{staticClass:"custom-block-title"},[_vm._v("TIP")]),_vm._v(" "),_c('p',[_vm._v("经过实战排错，resolver 8.8.8.8; 可以不配置，只需要修改 kafka 配置文件配置项 advertised.host.name = 对应机器 ip 即可")])]),_vm._v(" "),_c('p',[_vm._v("解决方法：")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("vi /usr/servers/nginx/conf/nginx.conf\n\n在 http 部分，加入 resolver 8.8.8.8;\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br')])]),_c('p',[_vm._v("再次尝试发现日志变更了")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("2019/05/07 20:20:55 [error] 9891#0: [lua] producer.lua:258: buffered messages send to kafka err: eshop-cache01 could not be resolved (3: Host not found), retryable: true, topic: access-log, partition_id: 0, length: 1, context: ngx.timer, client: 192.168.99.172, server: 0.0.0.0:80\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br')])]),_c('p',[_vm._v("可以看到日志，的确是去解析了，但是这个是我们本地自定义的肯定解析不到，那么这个问题是哪里的问题呢？")]),_vm._v(" "),_c('p',[_vm._v("我懒一点，视频中说到，需要更改 kafka 的配置文件，让用本机 ip 而不是  hostName")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("vi /usr/local/kafka_2.9.2-0.8.1.1/config/server.properties\n\n# 默认是 hostname，更改为自己机器的 ip 地址\n#advertised.host.name=<hostname routable by clients>\nadvertised.host.name = 192.168.99.170\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br')])]),_c('p',[_vm._v("再重启 kafka")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("[root@eshop-cache01 lua]# jps\n12698 Jps\n12310 logviewer\n1576 Kafka\n\nkill -9 1576\n\ncd /usr/local/kafka_2.9.2-0.8.1.1\nnohup bin/kafka-server-start.sh config/server.properties &\n# 查看是否启动是否报错\ncat nohup.out\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br')])]),_c('p',[_vm._v("再次访问，发现能接受到信息了")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("[root@eshop-cache01 kafka_2.9.2-0.8.1.1]# bin/kafka-console-consumer.sh --zookeeper 192.168.99.170:2181,192.168.99.171:2181,192.168.99.172:2181 --topic access-log --from-beginning\n{\"method\":\"GET\",\"http_version\":1.1,\"raw_reader\":\"GET \\/product?productId=1&shopId=1 HTTP\\/1.1\\r\\nHost: 192.168.99.171\\r\\nUser-Agent: lua-resty-http\\/0.13 (Lua) ngx_lua\\/9014\\r\\n\\r\\n\",\"uri_args\":{\"productId\":\"1\",\"shopId\":\"1\"},\"headers\":{\"host\":\"192.168.99.171\",\"user-agent\":\"lua-resty-http\\/0.13 (Lua) ngx_lua\\/9014\"}}\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])])])}
var staticRenderFns = []



/***/ })

}]);
//# sourceMappingURL=266.a90e58f5.js.map