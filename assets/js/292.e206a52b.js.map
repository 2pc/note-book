{"version":3,"sources":["webpack:///./docs/cache-pdp/dr/137.md","webpack:///./docs/cache-pdp/dr/137.md?02b0","webpack:///./docs/cache-pdp/dr/137.md?6c0d"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAiF;AACjF;;;AAGA;AAC6F;AAC7F,gBAAgB,2GAAU;AAC1B;AACA,EAAE,6EAAM;AACR,EAAE,sFAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,gF;;;;;;;;;;;;ACjBf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,qCAAqC,OAAO,gCAAgC,WAAW,OAAO,gEAAgE,UAAU,mCAAmC,mEAAmE,2GAA2G,OAAO,kBAAkB,UAAU,mCAAmC,qBAAqB,0WAA0W,OAAO,0BAA0B,UAAU,mCAAmC,6BAA6B,qGAAqG,OAAO,kCAAkC,kgBAAkgB,OAAO,wBAAwB,UAAU,mCAAmC,2BAA2B,qmBAAqmB,OAAO,aAAa,UAAU,mCAAmC,gBAAgB;AAC/6E","file":"assets/js/292.e206a52b.js","sourcesContent":["import { render, staticRenderFns } from \"./137.md?vue&type=template&id=83f71c16&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"2e9acca5-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../node_modules/@vuepress/markdown-loader/index.js??ref--1-2!./137.md?vue&type=template&id=83f71c16&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"_137-商品详情页动态渲染系统-为什么是-twemproxy-redis-而不是-redis-cluster\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_137-商品详情页动态渲染系统-为什么是-twemproxy-redis-而不是-redis-cluster\"}},[_vm._v(\"#\")]),_vm._v(\" 137. 商品详情页动态渲染系统：为什么是 twemproxy+redis 而不是 redis cluster？\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"lvs-那块不讲解\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#lvs-那块不讲解\"}},[_vm._v(\"#\")]),_vm._v(\" LVS 那块不讲解\")]),_vm._v(\" \"),_c('p',[_vm._v(\"LVS+KeepAlived 负载均衡 、MySQL+Atlas 分库分表，不讲解了，很鸡肋\")]),_vm._v(\" \"),_c('p',[_vm._v(\"原因：单课，聚焦，围绕一个主题去讲解，太发散了以后，什么都讲，没有围绕主题去讲解，意义不是太大\")]),_vm._v(\" \"),_c('p',[_vm._v(\"本课主题：商品详情页系统，亿级流量大电商，核心的东西\")]),_vm._v(\" \"),_c('p',[_vm._v(\"随着课程不断讲解，可能会有 10% 的出入，砍掉或者调整一些细枝末节，大的思路是 ok 的，不会改变的\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"redis-cluster-的问题\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#redis-cluster-的问题\"}},[_vm._v(\"#\")]),_vm._v(\" redis cluster 的问题\")]),_vm._v(\" \"),_c('p',[_vm._v(\"之前讲解过 \"),_c('RouterLink',{attrs:{\"to\":\"/cache-pdp/redis/028.html\"}},[_vm._v(\"redis cluster\")]),_vm._v(\"，那么他的优缺点如下\")],1),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"不好做读写分离\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"读写请求全部落到主实例上的，如果要扩展写 QPS，或者是扩展读 QPS，都是需要扩展主实例的数量，从实例就是一个用做热备 + 高可用\\n2. 不好跟 nginx+lua 直接整合\")]),_vm._v(\" \"),_c('p',[_vm._v(\"lua->redis 的 client api，但是不太支持 redis cluster，中间就要走一个中转的 java 服务\\n3. 不好做树状集群结构\")]),_vm._v(\" \"),_c('p',[_vm._v(\"比如 redis 主集群一主三从双机房架构，redis cluster 不太好做成那种树状结构\\n4. 优点就是方便\")]),_vm._v(\" \"),_c('p',[_vm._v(\"相当于是上下线节点、集群扩容、运维工作、高可用自动切换，比较方便\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"twemproxy-redis\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#twemproxy-redis\"}},[_vm._v(\"#\")]),_vm._v(\" twemproxy+redis\")]),_vm._v(\" \"),_c('p',[_vm._v(\"twemproxy+redis 做集群，redis 部署多个主实例，每个主实例可以挂载一些 redis 从实例，如果将不同的数据分片写入不同的 redis 主实例中，twemproxy 这么一个缓存集群的中间件\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"上线下线节点，有一些手工维护集群的成本\")]),_vm._v(\" \"),_c('li',[_vm._v(\"支持 redis 集群 + 读写分离\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"就是最基本的多个 redis 主实例，数据落到哪一个实例上是 twemproxy 这个中间件来决定的，java/nginx+lua 客户端，是连接 twemproxy 中间件的。每个 redis 主实例就挂载了多个 redis 从实例，高可用 -> 可以使用哨兵\")]),_vm._v(\" \"),_c('p',[_vm._v(\"redis cluster 读写都要落到主实例的限制，你自己可以决定写主，读从，等等\\n3. 支持 redis cli 协议，可以直接跟 nginx+lua 整合\\n4. 可以搭建树状集群结构\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"如何选择\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#如何选择\"}},[_vm._v(\"#\")]),_vm._v(\" 如何选择？\")]),_vm._v(\" \"),_c('p',[_vm._v(\"就是看你的架构中是否能容忍 redis cluster 的前 3 个问题\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}