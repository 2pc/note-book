(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[344],{

/***/ "./docs/cache-pdp/hystrix/107.md":
/*!***************************************!*\
  !*** ./docs/cache-pdp/hystrix/107.md ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _107_md_vue_type_template_id_11a2024c___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./107.md?vue&type=template&id=11a2024c& */ "./docs/cache-pdp/hystrix/107.md?vue&type=template&id=11a2024c&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");

var script = {}


/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
  script,
  _107_md_vue_type_template_id_11a2024c___WEBPACK_IMPORTED_MODULE_0__["render"],
  _107_md_vue_type_template_id_11a2024c___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./docs/cache-pdp/hystrix/107.md?vue&type=template&id=11a2024c&":
/*!**********************************************************************!*\
  !*** ./docs/cache-pdp/hystrix/107.md?vue&type=template&id=11a2024c& ***!
  \**********************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_107_md_vue_type_template_id_11a2024c___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib??ref--1-1!../../../node_modules/@vuepress/markdown-loader??ref--1-2!./107.md?vue&type=template&id=11a2024c& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/hystrix/107.md?vue&type=template&id=11a2024c&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_107_md_vue_type_template_id_11a2024c___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_107_md_vue_type_template_id_11a2024c___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/hystrix/107.md?vue&type=template&id=11a2024c&":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??ref--1-1!./node_modules/@vuepress/markdown-loader??ref--1-2!./docs/cache-pdp/hystrix/107.md?vue&type=template&id=11a2024c& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{"slot-key":_vm.$parent.slotKey}},[_c('h1',{attrs:{"id":"_107-hystrix-的-metric-统计相关的各种高阶配置讲解"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#_107-hystrix-的-metric-统计相关的各种高阶配置讲解"}},[_vm._v("#")]),_vm._v(" 107. hystrix 的 metric 统计相关的各种高阶配置讲解")]),_vm._v(" "),_c('p',[_vm._v("metric：度量标准")]),_vm._v(" "),_c('h2',{attrs:{"id":"为什么需要监控与报警"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#为什么需要监控与报警"}},[_vm._v("#")]),_vm._v(" 为什么需要监控与报警？")]),_vm._v(" "),_c('p',[_vm._v("HystrixCommand 执行的时候，会生成一些执行耗时等方面的统计信息。\n这些信息对于系统的运维来说，是很有帮助的，因为我们通过这些统计信息可以看到整个系统是怎么运行的。\nhystrix 对每个 command key 都会提供一份 metric，而且是秒级统计粒度的。")]),_vm._v(" "),_c('p',[_vm._v("这些统计信息，无论是单独看，还是聚合起来看，都是很有用的。\n如果将一个请求中的多个 command 的统计信息拿出来单独查看，包括耗时的统计，对 debug 系统是很有帮助的。\n聚合起来的 metric 对于系统层面的行为来说，是很有帮助的，很适合做报警或者报表。\nhystrix dashboard 就很适合。")]),_vm._v(" "),_c('h2',{attrs:{"id":"hystrix-的事件类型"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#hystrix-的事件类型"}},[_vm._v("#")]),_vm._v(" hystrix 的事件类型")]),_vm._v(" "),_c('blockquote',[_c('p',[_c('a',{attrs:{"href":"https://github.com/Netflix/Hystrix/wiki/Metrics-and-Monitoring","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("官网直达"),_c('OutboundLink')],1),_vm._v("\n很详细的 metric 讲解，还有他的流使用示例")])]),_vm._v(" "),_c('p',[_vm._v("对于 hystrix command 来说只会返回一个值，execute 只有一个 event type，fallback 也只有一个event type，那么返回一个 SUCCESS 就代表着命令执行的结束")]),_vm._v(" "),_c('p',[_vm._v("对于 hystrix observable command 来说，多个值可能被返回，所以：")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("emit event 代表一个 value 被返回")]),_vm._v(" "),_c('li',[_vm._v("success 代表成功")]),_vm._v(" "),_c('li',[_vm._v("failure 代表异常")])]),_vm._v(" "),_c('h3',{attrs:{"id":"execute-event-type"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#execute-event-type"}},[_vm._v("#")]),_vm._v(" execute event type")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("EMIT\t\t\t\t\tobservable command 返回一个 value")]),_vm._v(" "),_c('li',[_vm._v("SUCCESS \t\t\t\t完成执行，并且没有报错")]),_vm._v(" "),_c('li',[_vm._v("FAILURE\t\t\t\t\t执行时抛出了一个异常，会触发 fallback")]),_vm._v(" "),_c('li',[_vm._v("TIMEOUT\t\t\t\t\t开始执行了，但是在指定时间内没有完成执行，会触发 fallback")]),_vm._v(" "),_c('li',[_vm._v("BAD_REQUEST\t\t\t\t执行的时候抛出了一个 HystrixBadRequestException")]),_vm._v(" "),_c('li',[_vm._v("SHORT_CIRCUITED\t\t\t短路器打开了，触发 fallback")]),_vm._v(" "),_c('li',[_vm._v("THREAD_POOL_REJECTED\t线程池的容量满了，被 reject，触发 fallback")]),_vm._v(" "),_c('li',[_vm._v("SEMAPHORE_REJECTED\t\t信号量的容量满了，被 reject，触发 fallback")])]),_vm._v(" "),_c('h3',{attrs:{"id":"fallback-event-type"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#fallback-event-type"}},[_vm._v("#")]),_vm._v(" fallback event type")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("FALLBACK_EMIT\t\t\tobservable command，fallback value 被返回了")]),_vm._v(" "),_c('li',[_vm._v("FALLBACK_SUCCESS\t\tfallback 逻辑执行没有报错")]),_vm._v(" "),_c('li',[_vm._v("FALLBACK_FAILURE\t\tfallback 逻辑抛出了异常，会报错")]),_vm._v(" "),_c('li',[_vm._v("FALLBACK_REJECTION\t\tfallback 的信号量容量满了，fallback 不执行，报错")]),_vm._v(" "),_c('li',[_vm._v("FALLBACK_MISSING\t\tfallback 没有实现，会报错")])]),_vm._v(" "),_c('h3',{attrs:{"id":"其他的-event-type"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#其他的-event-type"}},[_vm._v("#")]),_vm._v(" 其他的 event type")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("EXCEPTION_THROWN\t\tcommand 生命自周期是否抛出了异常")]),_vm._v(" "),_c('li',[_vm._v("RESPONSE_FROM_CACHE\t\tcommand 是否在 cache 中查找到了结果")]),_vm._v(" "),_c('li',[_vm._v("COLLAPSED\t\t\t\tcommand 是否是一个合并 batch 中的一个")])]),_vm._v(" "),_c('h3',{attrs:{"id":"thread-pool-event-type"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#thread-pool-event-type"}},[_vm._v("#")]),_vm._v(" thread pool event type")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("EXECUTED\t\t\t\t线程池有空间，允许 command 去执行了")]),_vm._v(" "),_c('li',[_vm._v("REJECTED \t\t\t\t线程池没有空间，不允许 command 执行，reject 掉了")])]),_vm._v(" "),_c('h3',{attrs:{"id":"collapser-event-type"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#collapser-event-type"}},[_vm._v("#")]),_vm._v(" collapser event type")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("BATCH_EXECUTED\t\t\tcollapser 合并了一个 batch，并且执行了其中的 command")]),_vm._v(" "),_c('li',[_vm._v("ADDED_TO_BATCH\t\t\tcommand 加入了一个 collapser batch")]),_vm._v(" "),_c('li',[_vm._v("RESPONSE_FROM_CACHE\t\t没有加入 batch，而是直接取了 request cache 中的数据")])]),_vm._v(" "),_c('h2',{attrs:{"id":"metric-storage"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#metric-storage"}},[_vm._v("#")]),_vm._v(" metric storage")]),_vm._v(" "),_c('p',[_vm._v("metric 被生成之后，就会按照一段时间来存储，存储了一段时间的数据才会推送到其他系统中，\n比如 hystrix dashboard；另外一种方式，就是每次生成 metric 就实时推送 metric 流到其他地方，\n但是这样的话，会给系统带来很大的压力")]),_vm._v(" "),_c('p',[_vm._v("hystrix 的方式是将 metric 写入一个内存中的数据结构中，在一段时间之后就可以查询到；\nhystrix 1.5x 之后，采取的是为每个 command key 都生成一个 start event 和 completion event 流，\n而且可以订阅这个流。每个 thread pool key 也是一样的，包括每个 collapser key 也是一样的。")]),_vm._v(" "),_c('p',[_vm._v("每个 command 的 event 是发送给一个线程安全的 RxJava 中的 rx.Subject，因为是线程安全的，所以不需要进行线程同步")]),_vm._v(" "),_c('p',[_vm._v("因此每个 command 级别的，threadpool 级别的，每个 collapser 级别的，event 都会发送到对应的 RxJava的 rx.Subject 对象中。这些 rx.Subject 对象接着就会被暴露出 Observable 接口，可以被订阅。")]),_vm._v(" "),_c('h2',{attrs:{"id":"metric-统计相关的配置"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#metric-统计相关的配置"}},[_vm._v("#")]),_vm._v(" metric 统计相关的配置")]),_vm._v(" "),_c('blockquote',[_c('p',[_c('a',{attrs:{"href":"https://github.com/Netflix/Hystrix/wiki/Configuration#CommandMetrics","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("官网直达"),_c('OutboundLink')],1)])]),_vm._v(" "),_c('h3',{attrs:{"id":"metrics-rollingstats-timeinmilliseconds"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#metrics-rollingstats-timeinmilliseconds"}},[_vm._v("#")]),_vm._v(" metrics.rollingStats.timeInMilliseconds")]),_vm._v(" "),_c('p',[_vm._v("设置统计的 rolling window，单位是毫秒，hystrix 只会维持这段时间内的 metric 供短路器统计使用")]),_vm._v(" "),_c('p',[_vm._v("这个属性是不允许热修改的，默认值是 10000，就是 10 秒钟")]),_vm._v(" "),_c('div',{staticClass:"language-java line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("HystrixCommandProperties"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("Setter")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n   "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("withMetricsRollingStatisticalWindowInMilliseconds")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("int")]),_vm._v(" value"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])]),_c('h3',{attrs:{"id":"metrics-rollingstats-numbuckets"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#metrics-rollingstats-numbuckets"}},[_vm._v("#")]),_vm._v(" metrics.rollingStats.numBuckets")]),_vm._v(" "),_c('p',[_vm._v("该属性设置每个滑动窗口被拆分成多少个 bucket，而且滑动窗口对这个参数必须可以整除，同样不允许热修改")]),_vm._v(" "),_c('p',[_vm._v("默认值是 10，也就是说，每秒钟是一个 bucket")]),_vm._v(" "),_c('p',[_vm._v("随着时间的滚动，比如又过了一秒钟，那么最久的一秒钟的 bucket 就会被丢弃，然后新的一秒的 bucket 会被创建")]),_vm._v(" "),_c('div',{staticClass:"language-java line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("HystrixCommandProperties"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("Setter")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n   "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("withMetricsRollingStatisticalWindowBuckets")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("int")]),_vm._v(" value"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])]),_c('h3',{attrs:{"id":"metrics-rollingpercentile-enabled"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#metrics-rollingpercentile-enabled"}},[_vm._v("#")]),_vm._v(" metrics.rollingPercentile.enabled")]),_vm._v(" "),_c('p',[_vm._v("控制是否追踪请求耗时，以及通过百分比方式来统计，默认是 true")]),_vm._v(" "),_c('div',{staticClass:"language-java line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("HystrixCommandProperties"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("Setter")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n   "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("withMetricsRollingPercentileEnabled")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("boolean")]),_vm._v(" value"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])]),_c('h3',{attrs:{"id":"metrics-rollingpercentile-timeinmilliseconds"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#metrics-rollingpercentile-timeinmilliseconds"}},[_vm._v("#")]),_vm._v(" metrics.rollingPercentile.timeInMilliseconds")]),_vm._v(" "),_c('p',[_vm._v("设置 rolling window 被持久化保存的时间，这样才能计算一些请求耗时的百分比，默认是 60000 = 60s，不允许热修改")]),_vm._v(" "),_c('p',[_vm._v("相当于是一个大的 rolling window，专门用于计算请求执行耗时的百分比")]),_vm._v(" "),_c('div',{staticClass:"language-java line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("HystrixCommandProperties"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("Setter")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n   "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("withMetricsRollingPercentileWindowInMilliseconds")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("int")]),_vm._v(" value"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])]),_c('h3',{attrs:{"id":"metrics-rollingpercentile-numbuckets"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#metrics-rollingpercentile-numbuckets"}},[_vm._v("#")]),_vm._v(" metrics.rollingPercentile.numBuckets")]),_vm._v(" "),_c('p',[_vm._v("设置 rolling percentile window 被拆分成的 bucket 数量，上面那个参数除以这个参数必须能够整除，不允许热修改")]),_vm._v(" "),_c('p',[_vm._v("默认值是 6，也就是每 10s 被拆分成一个 bucket")]),_vm._v(" "),_c('div',{staticClass:"language-java line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("HystrixCommandProperties"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("Setter")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n   "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("withMetricsRollingPercentileWindowBuckets")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("int")]),_vm._v(" value"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])]),_c('h3',{attrs:{"id":"metrics-rollingpercentile-bucketsize"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#metrics-rollingpercentile-bucketsize"}},[_vm._v("#")]),_vm._v(" metrics.rollingPercentile.bucketSize")]),_vm._v(" "),_c('p',[_vm._v("设置每个 bucket 的请求执行次数被保存的最大数量，如果在一个 bucket 内，执行次数超过了这个值，那么就会重新覆盖从 bucket 的开始再写")]),_vm._v(" "),_c('p',[_vm._v("举例来说，如果 bucket size 设置为 100，而且每个 bucket 代表一个 10 秒钟的窗口，\n但是在这个 bucket 内发生了 500 次请求执行，那么这个 bucket 内仅仅会保留 100 次执行")]),_vm._v(" "),_c('p',[_vm._v("如果调大这个参数，就会提升需要耗费的内存，来存储相关的统计值，不允许热修改")]),_vm._v(" "),_c('p',[_vm._v("默认值是 100")]),_vm._v(" "),_c('div',{staticClass:"language-java line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("HystrixCommandProperties"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("Setter")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n   "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("withMetricsRollingPercentileBucketSize")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("int")]),_vm._v(" value"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])]),_c('h3',{attrs:{"id":"metrics-healthsnapshot-intervalinmilliseconds"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#metrics-healthsnapshot-intervalinmilliseconds"}},[_vm._v("#")]),_vm._v(" metrics.healthSnapshot.intervalInMilliseconds")]),_vm._v(" "),_c('p',[_vm._v("控制成功和失败的百分比计算，与影响短路器之间的等待时间，默认值是 500 毫秒")]),_vm._v(" "),_c('div',{staticClass:"language-java line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("HystrixCommandProperties"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("Setter")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n   "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("withMetricsHealthSnapshotIntervalInMilliseconds")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("int")]),_vm._v(" value"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])]),_c('div',{staticClass:"custom-block tip"},[_c('p',{staticClass:"custom-block-title"},[_vm._v("TIP")]),_vm._v(" "),_c('p',[_vm._v("一般来说这些配置使用默认即可")])])])}
var staticRenderFns = []



/***/ })

}]);
//# sourceMappingURL=344.0818902f.js.map