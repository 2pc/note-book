(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[345],{

/***/ "./docs/cache-pdp/hystrix/109.md":
/*!***************************************!*\
  !*** ./docs/cache-pdp/hystrix/109.md ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _109_md_vue_type_template_id_7e43aa46___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./109.md?vue&type=template&id=7e43aa46& */ "./docs/cache-pdp/hystrix/109.md?vue&type=template&id=7e43aa46&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");

var script = {}


/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
  script,
  _109_md_vue_type_template_id_7e43aa46___WEBPACK_IMPORTED_MODULE_0__["render"],
  _109_md_vue_type_template_id_7e43aa46___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./docs/cache-pdp/hystrix/109.md?vue&type=template&id=7e43aa46&":
/*!**********************************************************************!*\
  !*** ./docs/cache-pdp/hystrix/109.md?vue&type=template&id=7e43aa46& ***!
  \**********************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_109_md_vue_type_template_id_7e43aa46___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib??ref--1-1!../../../node_modules/@vuepress/markdown-loader??ref--1-2!./109.md?vue&type=template&id=7e43aa46& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/hystrix/109.md?vue&type=template&id=7e43aa46&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_109_md_vue_type_template_id_7e43aa46___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_109_md_vue_type_template_id_7e43aa46___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/hystrix/109.md?vue&type=template&id=7e43aa46&":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??ref--1-1!./node_modules/@vuepress/markdown-loader??ref--1-2!./docs/cache-pdp/hystrix/109.md?vue&type=template&id=7e43aa46& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{"slot-key":_vm.$parent.slotKey}},[_c('h1',{attrs:{"id":"_109-生产环境中的hystrix分布式系统的工程运维经验总结"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#_109-生产环境中的hystrix分布式系统的工程运维经验总结"}},[_vm._v("#")]),_vm._v(" 109. 生产环境中的hystrix分布式系统的工程运维经验总结")]),_vm._v(" "),_c('h2',{attrs:{"id":"经验"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#经验"}},[_vm._v("#")]),_vm._v(" 经验")]),_vm._v(" "),_c('p',[_vm._v("如果发现了严重的依赖调用延时，先不用急着去修改配置，如果一个 command 被限流了，可能本来就应该限流")]),_vm._v(" "),_c('p',[_vm._v("在 netflix 早期的时候，经常会有人在发现短路器因为访问延时发生的时候，去热修改一些配置遏制，比如线程池大小、队列大小、超时时长等等，给更多的资源，但是这其实是不对的")]),_vm._v(" "),_c('p',[_vm._v("如果我们之前对系统进行了良好的配置，然后现在在高峰期，系统在进行线程池 reject、超时、短路、那么此时我们应该集中精力去看底层根本的原因，而不是调整配置")]),_vm._v(" "),_c('p',[_vm._v("为什么在高峰期，一个 10 个线程的线程池，搞不定这些流量呢？代码写的太烂了？")]),_vm._v(" "),_c('p',[_vm._v("千万不要急于给你的依赖调用过多的资源，比如线程池大小、队列大小、超时时长、信号量容量等等，因为这可能导致我们自己对自己的系统进行 DDOS 攻击（疯狂的大量的访问你的机器，最后给打垮）")]),_vm._v(" "),_c('p',[_vm._v("举例来说，想象一下，我们现在有 100 台服务器组成的集群，每台机器有 10个 线程大小的线程池去访问一个服务，那么我们对那个服务就有 1000个 线程资源去访问了")]),_vm._v(" "),_c('p',[_vm._v("在正常情况下，可能只会用到其中 200~300个 线程去访问那个后端服务，但是如果在高峰期出现了访问延时，可能导致 1000 个线程全部被调用去访问那个后端服务，如果我们调整到每台服务器 20 个线程呢？")]),_vm._v(" "),_c('p',[_vm._v("如果因为你的代码等问题导致访问延时，即使有 20个 线程可能还是会导致线程池资源被占满，此时就有 2000个 线程去访问后端服务，可能对后端服务就是一场灾难")]),_vm._v(" "),_c('p',[_vm._v("这就是断路器的作用了，如果我们把后端服务打死了，或者产生了大量的压力，有大量的 timeout 和 reject，那么就自动短路，一段时间后，等流量洪峰过去了，再重启访问")]),_vm._v(" "),_c('p',[_vm._v("简单来说，让系统自己去限流、短路、超时、以及 reject，直到系统重新变得正常了")]),_vm._v(" "),_c('p',[_vm._v("最后总结：就是不要随便乱改资源配置，不要随便乱增加线程池大小，等待队列大小，异常情况是正常的")]),_vm._v(" "),_c('h2',{attrs:{"id":"笔者疑问"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#笔者疑问"}},[_vm._v("#")]),_vm._v(" 笔者疑问")]),_vm._v(" "),_c('p',[_vm._v("今天打算在 spring cloud 子系统中加上 hystrix-dashboard；通过 yml 自动配置最少参数后，能看见 ui 图了，\n但是我发现它默认是「一个服务名一个线程池」，意思是所有的接口访问都是一个线程池管理的，\n然而不加大线程没法让访问不报错。")]),_vm._v(" "),_c('p',[_vm._v("项目是一个后台定时任务调度项目，调用接口频率高的时候，每秒平均也就 10 来个请求；\n所以还是不太明白在实际开发中到底要怎么来分这个线程池？")])])}
var staticRenderFns = []



/***/ })

}]);
//# sourceMappingURL=345.4e8ee6cb.js.map