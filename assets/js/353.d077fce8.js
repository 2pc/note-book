(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[353],{

/***/ "./docs/cache-pdp/redis/007.md":
/*!*************************************!*\
  !*** ./docs/cache-pdp/redis/007.md ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _007_md_vue_type_template_id_484daf42___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./007.md?vue&type=template&id=484daf42& */ "./docs/cache-pdp/redis/007.md?vue&type=template&id=484daf42&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");

var script = {}


/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
  script,
  _007_md_vue_type_template_id_484daf42___WEBPACK_IMPORTED_MODULE_0__["render"],
  _007_md_vue_type_template_id_484daf42___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./docs/cache-pdp/redis/007.md?vue&type=template&id=484daf42&":
/*!********************************************************************!*\
  !*** ./docs/cache-pdp/redis/007.md?vue&type=template&id=484daf42& ***!
  \********************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_007_md_vue_type_template_id_484daf42___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib??ref--1-1!../../../node_modules/@vuepress/markdown-loader??ref--1-2!./007.md?vue&type=template&id=484daf42& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/redis/007.md?vue&type=template&id=484daf42&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_007_md_vue_type_template_id_484daf42___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_007_md_vue_type_template_id_484daf42___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/redis/007.md?vue&type=template&id=484daf42&":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??ref--1-1!./node_modules/@vuepress/markdown-loader??ref--1-2!./docs/cache-pdp/redis/007.md?vue&type=template&id=484daf42& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{"slot-key":_vm.$parent.slotKey}},[_c('h1',{attrs:{"id":"_007-单机版-redis-的安装以及-redis-生产环境启动方案"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#_007-单机版-redis-的安装以及-redis-生产环境启动方案"}},[_vm._v("#")]),_vm._v(" 007. 单机版 redis 的安装以及 redis 生产环境启动方案")]),_vm._v(" "),_c('p'),_c('div',{staticClass:"table-of-contents"},[_c('ul',[_c('li',[_c('a',{attrs:{"href":"#安装单机版-redis"}},[_vm._v("安装单机版 redis")])]),_c('li',[_c('a',{attrs:{"href":"#redis-的生产环境启动方案"}},[_vm._v("redis 的生产环境启动方案")])]),_c('li',[_c('a',{attrs:{"href":"#redis-cli的使用"}},[_vm._v("redis cli的使用")])]),_c('li',[_c('a',{attrs:{"href":"#小结"}},[_vm._v("小结")])])])]),_c('p'),_vm._v(" "),_c('div',{staticClass:"custom-block tip"},[_c('p',{staticClass:"custom-block-title"},[_vm._v("TIP")]),_vm._v(" "),_c('p',[_vm._v("都在 /usr/local 目录中安装和下载软件。有的会自动安装到目录。\n有一部分就是我们手工安装到该目录下的")])]),_vm._v(" "),_c('h2',{attrs:{"id":"安装单机版-redis"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#安装单机版-redis"}},[_vm._v("#")]),_vm._v(" 安装单机版 redis")]),_vm._v(" "),_c('p',[_vm._v("大家可以自己去官网下载，当然也可以用课程提供的压缩包")]),_vm._v(" "),_c('p',[_vm._v("安装依赖 tcl，如果先安装 redis 的话，会报错，所以需要安装一下 tcl")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("wget")]),_vm._v(" http://downloads.sourceforge.net/tcl/tcl8.6.1-src.tar.gz\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("tar")]),_vm._v(" -xzvf tcl8.6.1-src.tar.gz\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v("  /usr/local/tcl8.6.1/unix/\n./configure  \n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("make")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("&&")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("make")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br')])]),_c('p',[_vm._v("安装 redis")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_vm._v("使用 redis-3.2.8.tar.gz（截止 "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("2017")]),_vm._v(" 年 "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("4")]),_vm._v(" 月的最新稳定版）\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("tar")]),_vm._v(" -zxvf redis-3.2.8.tar.gz\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" redis-3.2.8\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("make")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("&&")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("make")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("test")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("&&")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("make")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br')])]),_c('p',[_vm._v("在等待很长时间后，最后有一个错误信息")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("!!! WARNING The following tests failed:\n\n*** [err]: Server is able to generate a stack trace on selected systems in tests/integration/logging.tcl\nexpected stack trace not found into log file\n*** [err]: Test replication partial resync: no backlog (diskless: yes, reconnect: 1) in tests/integration/replication-psync.tcl\nExpected condition '[s -1 sync_partial_err] > 0' to be true ([s -1 sync_partial_err] > 0)\nCleanup: may take some time... OK\nmake[1]: *** [test] Error 1\nmake[1]: Leaving directory `/usr/local/redis-3.2.8/src'\nmake: *** [test] Error 2\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br')])]),_c('p',[_vm._v("该错误。暂时不知道是否影响安装，但是这里的命令是 && 连接的，所以后面的 make install 没有被执行。")]),_vm._v(" "),_c('p',[_vm._v("这里单独执行 make install。完成安装试试")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("[")]),_vm._v("root@eshop-cache01 redis-3.2.8"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("]")]),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# make install")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" src "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("&&")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("make")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v("\nmake"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("[")]),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("1")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("]")]),_vm._v(": Entering directory `/usr/local/redis-3.2.8/src"),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("'\nHint: It'")]),_vm._v("s a good idea to run "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("'make test'")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n\n    INSTALL "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v("\n    INSTALL "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v("\n    INSTALL "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v("\n    INSTALL "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v("\n    INSTALL "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v("\nmake"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("[")]),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("1")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("]")]),_vm._v(": Leaving directory /usr/local/redis-3.2.8/src\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br')])]),_c('p',[_vm._v("安装还是会出现提示说 test 没有通过，但是这里是一个 Hint（提示），经过后面启动方案测试后，可以正常启动")]),_vm._v(" "),_c('h2',{attrs:{"id":"redis-的生产环境启动方案"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#redis-的生产环境启动方案"}},[_vm._v("#")]),_vm._v(" redis 的生产环境启动方案")]),_vm._v(" "),_c('p',[_vm._v("如果一般的学习课程，你就随便用 redis-server 启动一下 redis，做一些实验，这样的话没什么意义")]),_vm._v(" "),_c('p',[_vm._v("在生产环境是要把 redis 作为一个系统的 daemon 进程去运行的，每次系统启动 redis 进程一起启动")]),_vm._v(" "),_c('ol',[_c('li',[_c('p',[_vm._v("redis/utils 目录下，有个 redis_init_script 脚本")])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("将 redis_init_script 脚本拷贝到 /etc/init.d 目录中")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("cp")]),_vm._v(" redis_init_script /etc/init.d/\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 将文件修改为 redis_6379，6379 是 redis 的默认端口号")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" /etc/init.d/\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("mv")]),_vm._v(" redis_init_script redis_6379\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br')])]),_c('p',[_vm._v("端口号的配置也在该脚本中配置的 "),_c('code',[_vm._v("REDISPORT=6379")])])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("创建两个目录：")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("/etc/redis（存放 redis 的配置文件）")]),_vm._v(" "),_c('li',[_vm._v("/var/redis/6379（存放 redis 的持久化文件）")])]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("mkdir")]),_vm._v(" /etc/redis\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("mkdir")]),_vm._v(" /var/redis/\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("mkdir")]),_vm._v(" /var/redis/6379\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br')])])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("修改 redis 配置文件 redis.conf")]),_vm._v(" "),_c('p',[_vm._v("该文件默认在 redis 安装目录下，拷贝到 /etc/redis 目录中，修改名称为 6379.conf")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("cp")]),_vm._v(" /usr/local/redis-3.2.8/redis.conf /etc/redis/\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" /etc/redis/\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("mv")]),_vm._v(" redis.conf "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("6379")]),_vm._v(".conf\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br')])]),_c('p',[_vm._v("这里为什么要这样修改呢？是因为 redis_init_script 脚本中的 conf 配置指定了该目录下的 端口号.conf 文件")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token assign-left variable"}},[_vm._v("PIDFILE")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v("/var/run/redis_"),_c('span',{pre:true,attrs:{"class":"token variable"}},[_vm._v("${REDISPORT}")]),_vm._v(".pid\n"),_c('span',{pre:true,attrs:{"class":"token assign-left variable"}},[_vm._v("CONF")]),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"/etc/redis/"),_c('span',{pre:true,attrs:{"class":"token variable"}},[_vm._v("${REDISPORT}")]),_vm._v(".conf\"")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br')])])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("修改 redis.conf（6379.conf） 中的部分配置为生产环境")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_vm._v("daemonize\t"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("yes")]),_vm._v("\t\t\t\t\t\t\t          // 让redis以daemon进程运行\npidfile /var/run/redis_6379.pid     // 设置redis的pid文件位置\nport  "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("6379")]),_vm._v("\t\t\t\t\t\t            // 设置 redis的监听端口号\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("dir")]),_vm._v(" /var/redis/6379\t\t\t\t      //设置持久化文件的存储位置\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br')])]),_c('p',[_vm._v("建议在 windows 下使用文本编辑器搜索修改后在上传覆盖")])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("启动 redis")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 执行 redis_6379 脚本")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" /etc/init.d\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 如果没有执行权限的话，修改执行权限 ，可以使用 chmod u+x redis_6379")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# chmod 777 redis_6379")]),_vm._v("\n./redis_6379 start\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br')])])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("确认 redis 进程是否启动，"),_c('code',[_vm._v("ps -ef | grep redis")])])]),_vm._v(" "),_c('li',[_c('p',[_vm._v("让 redis 跟随系统启动自动启动")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_vm._v("使用 "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("chkconfig")]),_vm._v(" 命令开启该文件的系统服务,\n可以在 redis_6379 配置文件中上面添加  "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("chkconfig")]),_vm._v(" 的注释信息\n如下，不要在 "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("#!/bin/sh 上面添加")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("#!/bin/sh")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("#")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# Simple Redis init.d script conceived to work on Linux systems")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# as it does use of the /proc filesystem.")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# chkconfig:   2345 90 10")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# description:  Redis is a persistent key-value database")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br')])]),_c('p',[_vm._v("添加完成之后，使用以下命令开启随系统启动")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("chkconfig")]),_vm._v(" redis_6379 on\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br')])]),_c('p',[_c('a',{attrs:{"href":"https://www.cnblogs.com/qmfsun/p/3847459.html","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("有关 chkconfig 命令的更多信息"),_c('OutboundLink')],1),_vm._v(" 参考百度")])])]),_vm._v(" "),_c('h2',{attrs:{"id":"redis-cli的使用"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#redis-cli的使用"}},[_vm._v("#")]),_vm._v(" redis cli的使用")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 停止本机的 6379 端口的 redis 进程")]),_vm._v("\nredis-cli "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("shutdown")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 关闭指定机器的 redis，不加 shutdown 命令的话就是登陆到 cli")]),_vm._v("\nredis-cli -h "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("127.0")]),_vm._v(".0.1 -p "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("6379")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("shutdown")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# ping redis 的端口，看是否正常")]),_vm._v("\nredis-cli PING\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 默认连接本机 6379 的redis")]),_vm._v("\nredis-cli\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 在 cli 中可以使用 redis 的命令，下面使用最贱的 set 和 get 命令测试")]),_vm._v("\nSET k1 v1\nGET k1\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br')])]),_c('h2',{attrs:{"id":"小结"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#小结"}},[_vm._v("#")]),_vm._v(" 小结")]),_vm._v(" "),_c('p',[_vm._v("redis 的技术包括 4 块：")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("各种数据结构和命令的使用，包括 java api 的使用")]),_vm._v(" "),_c('li',[_vm._v("一些特殊的解决方案的使用，pub/sub 消息系统、分布式锁、输入的自动完成，等等")]),_vm._v(" "),_c('li',[_vm._v("日常的管理相关的命令")]),_vm._v(" "),_c('li',[_vm._v("企业级的集群部署和架构")])]),_vm._v(" "),_c('p',[_vm._v("我们这套课程，实际上是针对企业级的大型缓存架构，用的项目是真实的大型电商网站的详情页系统（缓存）")]),_vm._v(" "),_c('p',[_vm._v("我们首先讲解的第一块，其实就是企业级的大型缓存架构中的 redis 集群架构（海量数据、高并发、高可用），最最流行，最最常用的分布式缓存系统")]),_vm._v(" "),_c('p',[_vm._v("所以前面三块的知识不在本课程范围内，当然后面我们做商品详情页系统的业务开发的时候，当然也会去用 redis 的一些命令。")]),_vm._v(" "),_c('p',[_vm._v("redis 基础知识可以通过教程、书籍、视频去学习")]),_vm._v(" "),_c('p',[_vm._v("本课程会重点讲解 redis 持久化、主从架构、复制原理、集群架构、数据分布式存储原理、哨兵原理、高可用架构")]),_vm._v(" "),_c('p',[_vm._v("本课程与网上一些 redis 的教程有什么不同呢？持久化、集群、哨兵这些都是泛泛而讲，简单带你搭建一下，而我会深入集群架构的底层原理，哨兵的底层原理，用一线的经验告诉你 redis 的大规模的架构师如何去支撑海量数据、高并发、高可用的")])])}
var staticRenderFns = []



/***/ })

}]);
//# sourceMappingURL=353.d077fce8.js.map