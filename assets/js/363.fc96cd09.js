(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[363],{

/***/ "./docs/cache-pdp/redis/028.md":
/*!*************************************!*\
  !*** ./docs/cache-pdp/redis/028.md ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _028_md_vue_type_template_id_5f6826d1___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./028.md?vue&type=template&id=5f6826d1& */ "./docs/cache-pdp/redis/028.md?vue&type=template&id=5f6826d1&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");

var script = {}


/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
  script,
  _028_md_vue_type_template_id_5f6826d1___WEBPACK_IMPORTED_MODULE_0__["render"],
  _028_md_vue_type_template_id_5f6826d1___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./docs/cache-pdp/redis/028.md?vue&type=template&id=5f6826d1&":
/*!********************************************************************!*\
  !*** ./docs/cache-pdp/redis/028.md?vue&type=template&id=5f6826d1& ***!
  \********************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_028_md_vue_type_template_id_5f6826d1___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib??ref--1-1!../../../node_modules/@vuepress/markdown-loader??ref--1-2!./028.md?vue&type=template&id=5f6826d1& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/redis/028.md?vue&type=template&id=5f6826d1&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_028_md_vue_type_template_id_5f6826d1___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_028_md_vue_type_template_id_5f6826d1___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/cache-pdp/redis/028.md?vue&type=template&id=5f6826d1&":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??ref--1-1!./node_modules/@vuepress/markdown-loader??ref--1-2!./docs/cache-pdp/redis/028.md?vue&type=template&id=5f6826d1& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{"slot-key":_vm.$parent.slotKey}},[_c('h1',{attrs:{"id":"_028-在项目中重新搭建一套读写分离-高可用-多-master-的-redis-cluster-集群"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#_028-在项目中重新搭建一套读写分离-高可用-多-master-的-redis-cluster-集群"}},[_vm._v("#")]),_vm._v(" 028. 在项目中重新搭建一套读写分离+高可用+多 master 的 redis cluster 集群")]),_vm._v(" "),_c('p',[_vm._v("上一章节对 redis cluster 最最基础的一些知识进行了了解。")]),_vm._v(" "),_c('p',[_vm._v("redis cluster: master+slave 复制和读写分离/高可用和主备切换 都是自动支持的，支持多个 master 的 hash slot 支持数据分布式存储")]),_vm._v(" "),_c('p',[_vm._v("所以停止之前所有的实例，包括 redis 主从和哨兵集群")]),_vm._v(" "),_c('h2',{attrs:{"id":"redis-cluster-的重要配置"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#redis-cluster-的重要配置"}},[_vm._v("#")]),_vm._v(" redis cluster 的重要配置")]),_vm._v(" "),_c('ul',[_c('li',[_c('p',[_c('code',[_vm._v("cluster-enabled <yes/no>")])])]),_vm._v(" "),_c('li',[_c('p',[_c('code',[_vm._v("cluster-config-file <filename>")])]),_vm._v(" "),_c('p',[_vm._v("这是指定一个文件，供 cluster 模式下的 redis 实例将集群状态保存在那里，包括集群中其他机器的信息，比如节点的上线和下限，故障转移，不是我们去维护的，给它指定一个文件，让 redis 自己去维护的")])]),_vm._v(" "),_c('li',[_c('p',[_c('code',[_vm._v("cluster-node-timeout <milliseconds>")])]),_vm._v(" "),_c('p',[_vm._v("节点存活超时时长，超过一定时长，认为节点宕机，master 宕机的话就会触发主备切换，slave 宕机就不会提供服务")])])]),_vm._v(" "),_c('h2',{attrs:{"id":"在三台机器上启动-6-个-redis-实例"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#在三台机器上启动-6-个-redis-实例"}},[_vm._v("#")]),_vm._v(" 在三台机器上启动 6 个 redis 实例")]),_vm._v(" "),_c('p',[_vm._v("redis cluster 集群要求至少 3 个 master，去组成一个高可用，健壮的分布式的集群，每个 master 都建议至少给一个 slave，3 个 master，3 个 slave，最少的要求")]),_vm._v(" "),_c('p',[_vm._v("正式环境下，建议都是说在 6 台机器上去搭建，至少 3 台机器，保证每个 master 都跟自己的 slave 不在同一台机器上，如果是 6 台自然更好")]),_vm._v(" "),_c('p',[_vm._v("3 台机器去搭建 6 个 redis 实例的 redis cluster")]),_vm._v(" "),_c('table',[_c('thead',[_c('tr',[_c('th',[_vm._v("hostname")]),_vm._v(" "),_c('th',[_vm._v("配置文件")])])]),_vm._v(" "),_c('tbody',[_c('tr',[_c('td',[_vm._v("eshop-cache01")]),_vm._v(" "),_c('td',[_vm._v("7001.conf、 7002.conf")])]),_vm._v(" "),_c('tr',[_c('td',[_vm._v("eshop-cache02")]),_vm._v(" "),_c('td',[_vm._v("7003.conf、 7004.conf")])]),_vm._v(" "),_c('tr',[_c('td',[_vm._v("eshop-cache03")]),_vm._v(" "),_c('td',[_vm._v("7005.conf、 7006.conf")])])])]),_vm._v(" "),_c('div',{staticClass:"custom-block tip"},[_c('p',{staticClass:"custom-block-title"},[_vm._v("TIP")]),_vm._v(" "),_c('p',[_vm._v("redis 还是一样的，只是配置文件中的属性不同了，建议使用默认的配置文件重新配置")])]),_vm._v(" "),_c('blockquote',[_c('p',[_vm._v("配置目录整体概览")])]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("|- /etc\n  |- /redis     # 存放配置文件，按端口名命名\n    |- 7001.conf\n  |- /redis-cluster  # 存放 redis 集群维护的配置文件目录\n  |- /init.d  \n    |-/redis_7001 # 启动脚本  \n|- /var\n  |-/log/redis  # 存放日志文件\n    |-/7001.log # 日志文件\n  |-/redis/7001 # 存放数据文件\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br')])]),_c('blockquote',[_c('p',[_vm._v("配置文件和启动脚本")])]),_vm._v(" "),_c('p',[_vm._v("对于配置文件 主要要修改的在下面了")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("port 7001\ncluster-enabled yes\ncluster-config-file /etc/redis-cluster/node-7001.conf\ncluster-node-timeout 15000\ndaemonize\tyes\t\t\t\t\t\t\t\npidfile /var/run/redis_7001.pid \t\t\t\t\t\t\ndir /var/redis/7001\nlogfile /var/log/redis/7001.log\n# 如果后续不能正常创建集群，请把这里修改成 ip 的形式\nbind eshop-cache01\t\t\nappendonly yes\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br')])]),_c('p',[_vm._v("为了方便快捷的把配置文件搞好。先执行以下命令")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("mkdir")]),_vm._v(" -p /etc/redis-cluster\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("mkdir")]),_vm._v(" -p /var/log/redis\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("mkdir")]),_vm._v(" -p /var/redis/7001\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 复制默认配置文件，并修改")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("cp")]),_vm._v(" /usr/local/redis-3.2.8/redis.conf /etc/redis/7001.conf\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 复制启动脚本，需要 6 个启动脚本 ，里面的 REDISPORT=7001 需要修改成和文件名对应的端口")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("cp")]),_vm._v(" /usr/local/redis-3.2.8/utils/redis_init_script /etc/init.d/redis_7001\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br')])]),_c('p',[_vm._v("然后下载 7001.conf 到 windows 中，按以上配置文件修改完成后，\n复制其余 5 份出来，只要全局把 7001 替换成 其余 5 分节点的端口和 bind 修改好就可以了")]),_vm._v(" "),_c('blockquote',[_c('p',[_vm._v("启动 6 个 redis 实例")])]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("# 通过之前一样的命令启动 6 个实例\n./redis_7001 start\n# 查看日志是否启动正常，现在配置了日志文件的\ncat /var/log/redis/7001.log\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br')])]),_c('h2',{attrs:{"id":"创建集群"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#创建集群"}},[_vm._v("#")]),_vm._v(" 创建集群")]),_vm._v(" "),_c('p',[_vm._v("之前启动的 6 个redis 实例只是单机的，需要使用工具创建集群")]),_vm._v(" "),_c('p',[_vm._v("通过官网提供的工具 redis-trib.rb 工具创建，该工具依赖了 ruby，先装依赖")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("# 不要直接使用此命令安装，因为安装的是低版本的。参考本文后面的 Ruby 的安装\nyum install -y ruby\n# 不要使用 yum 安装，在 centos 6 中只会安装 1.8 版本的，并且连 ruby 也一起安装的\nyum install -y rubygems\n# 前面的安装请参考 本文后面的 Ruby 安装\ngem install redis\n\n## 让 redis-trib.rb 工具不在具体目录下也可以使用，和 windows path 效果类似\ncp /usr/local/redis-3.2.8/src/redis-trib.rb /usr/local/bin\n\n# 创建集群，注意这里需要使用 ip 地址，否则不成功\n# --replicas: 每个 master 有几个 slave\n# 6 台机器，3 个 master，3 个 slave，尽量自己让 master 和 slave 不在一台机器上\nredis-trib.rb create --replicas 1 192.168.99.170:7001 192.168.99.170:7002 192.168.99.171:7003 192.168.99.171:7004 192.168.99.172:7005 192.168.99.172:7006\n\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("12")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("13")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("14")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("15")]),_c('br')])]),_c('p',[_vm._v("安装的话，不需要每台机器都安装，在 01 上安装和创建集群即可")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("# 在输入 yes 后，会如果报错。\nCan I set the above configuration? (type 'yes' to accept): yes\n/opt/rubies/ruby-2.3.8/lib/ruby/gems/2.3.0/gems/redis-4.1.0/lib/redis/client.rb:124:in `call': ERR Slot 0 is already busy (Redis::CommandError)\n\n原因是 slot 被占用，解决方案如下，登录各个节点执行 cluster reset\n[root@eshop-cache02 redis]# redis-cli -h 192.168.99.171 -p 7003\n192.168.99.171:7003> cluster reset\nOK\n192.168.99.171:7003> exit\n[root@eshop-cache02 redis]# redis-cli -h 192.168.99.171 -p 7004\n192.168.99.171:7004> cluster reset\nOK\n192.168.99.171:7004> exit\n[root@eshop-cache02 redis]# redis-cli -h 192.168.99.170 -p 7001\n192.168.99.170:7001> cluster reset\nOK\n192.168.99.170:7001> exit\n[root@eshop-cache02 redis]# redis-cli -h 192.168.99.170 -p 7002\n192.168.99.170:7002> cluster reset\nOK\n192.168.99.170:7002> exit\n[root@eshop-cache02 redis]# redis-cli -h 192.168.99.172 -p 7005\n192.168.99.172:7005> cluster reset\nOK\n192.168.99.172:7005> exit\n[root@eshop-cache02 redis]# redis-cli -h 192.168.99.172 -p 7006\n192.168.99.172:7006> cluster reset\nOK\n192.168.99.172:7006> exit\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("12")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("13")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("14")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("15")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("16")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("17")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("18")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("19")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("20")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("21")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("22")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("23")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("24")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("25")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("26")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("27")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("28")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("29")]),_c('br')])]),_c('p',[_vm._v("再次创建集群后，终于成功了。从安装 ruby 开始到现在已经过去了 4 个小时，\n真是太坎坷了")]),_vm._v(" "),_c('p',[_vm._v("可以看到如下的日志，它选择了 3 个master，3 个 slave 并且都不在一台机器上")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("[root@eshop-cache01 redis]# redis-trib.rb create --replicas 1 192.168.99.170:7001 192.168.99.170:7002 192.168.99.171:7003 192.168.99.171:7004 192.168.99.172:7005 192.168.99.172:7006\n>>> Creating cluster\n>>> Performing hash slots allocation on 6 nodes...\nUsing 3 masters:\n192.168.99.170:7001\n192.168.99.171:7003\n192.168.99.172:7005\nAdding replica 192.168.99.171:7004 to 192.168.99.170:7001\nAdding replica 192.168.99.170:7002 to 192.168.99.171:7003\nAdding replica 192.168.99.172:7006 to 192.168.99.172:7005\nM: 3807711e01cd28509d7ba9839e601058bf2a30cf 192.168.99.170:7001\n   slots:0-5460 (5461 slots) master\nS: b0d66be3b15e117696c50a781ff24a842456733d 192.168.99.170:7002\n   replicates 0ff0e8ab05a8b032aeacf24e0c7fea77be3f5c55\nM: 0ff0e8ab05a8b032aeacf24e0c7fea77be3f5c55 192.168.99.171:7003\n   slots:5461-10922 (5462 slots) master\nS: a174fe6613862db8985f82caac58bde91dfbd664 192.168.99.171:7004\n   replicates 3807711e01cd28509d7ba9839e601058bf2a30cf\nM: cb2256b653cf5b7b3f9d1478cfa2953cc334c5bf 192.168.99.172:7005\n   slots:10923-16383 (5461 slots) master\nS: 9247dfb394441619da9da5b75b62b034c3f420e5 192.168.99.172:7006\n   replicates cb2256b653cf5b7b3f9d1478cfa2953cc334c5bf\nCan I set the above configuration? (type 'yes' to accept): yes\n>>> Nodes configuration updated\n>>> Assign a different config epoch to each node\n>>> Sending CLUSTER MEET messages to join the cluster\nWaiting for the cluster to join...\n>>> Performing Cluster Check (using node 192.168.99.170:7001)\nM: 3807711e01cd28509d7ba9839e601058bf2a30cf 192.168.99.170:7001\n   slots:0-5460 (5461 slots) master\n   1 additional replica(s)\nS: 9247dfb394441619da9da5b75b62b034c3f420e5 192.168.99.172:7006\n   slots: (0 slots) slave\n   replicates cb2256b653cf5b7b3f9d1478cfa2953cc334c5bf\nM: cb2256b653cf5b7b3f9d1478cfa2953cc334c5bf 192.168.99.172:7005\n   slots:10923-16383 (5461 slots) master\n   1 additional replica(s)\nS: a174fe6613862db8985f82caac58bde91dfbd664 192.168.99.171:7004\n   slots: (0 slots) slave\n   replicates 3807711e01cd28509d7ba9839e601058bf2a30cf\nM: 0ff0e8ab05a8b032aeacf24e0c7fea77be3f5c55 192.168.99.171:7003\n   slots:5461-10922 (5462 slots) master\n   1 additional replica(s)\nS: b0d66be3b15e117696c50a781ff24a842456733d 192.168.99.170:7002\n   slots: (0 slots) slave\n   replicates 0ff0e8ab05a8b032aeacf24e0c7fea77be3f5c55\n[OK] All nodes agree about slots configuration.\n>>> Check for open slots...\n>>> Check slots coverage...\n[OK] All 16384 slots covered.\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("12")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("13")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("14")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("15")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("16")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("17")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("18")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("19")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("20")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("21")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("22")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("23")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("24")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("25")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("26")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("27")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("28")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("29")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("30")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("31")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("32")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("33")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("34")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("35")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("36")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("37")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("38")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("39")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("40")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("41")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("42")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("43")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("44")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("45")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("46")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("47")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("48")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("49")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("50")]),_c('br')])]),_c('p',[_vm._v("可以通过 check 命令检查")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("[root@eshop-cache01 redis]# redis-trib.rb check eshop-cache01:7001\n>>> Performing Cluster Check (using node eshop-cache01:7001)\nM: 3807711e01cd28509d7ba9839e601058bf2a30cf eshop-cache01:7001\n   slots:0-5460 (5461 slots) master\n   1 additional replica(s)\nS: 9247dfb394441619da9da5b75b62b034c3f420e5 192.168.99.172:7006\n   slots: (0 slots) slave\n   replicates cb2256b653cf5b7b3f9d1478cfa2953cc334c5bf\nM: cb2256b653cf5b7b3f9d1478cfa2953cc334c5bf 192.168.99.172:7005\n   slots:10923-16383 (5461 slots) master\n   1 additional replica(s)\nS: a174fe6613862db8985f82caac58bde91dfbd664 192.168.99.171:7004\n   slots: (0 slots) slave\n   replicates 3807711e01cd28509d7ba9839e601058bf2a30cf\nM: 0ff0e8ab05a8b032aeacf24e0c7fea77be3f5c55 192.168.99.171:7003\n   slots:5461-10922 (5462 slots) master\n   1 additional replica(s)\nS: b0d66be3b15e117696c50a781ff24a842456733d 192.168.99.170:7002\n   slots: (0 slots) slave\n   replicates 0ff0e8ab05a8b032aeacf24e0c7fea77be3f5c55\n[OK] All nodes agree about slots configuration.\n>>> Check for open slots...\n>>> Check slots coverage...\n[OK] All 16384 slots covered.\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("12")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("13")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("14")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("15")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("16")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("17")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("18")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("19")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("20")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("21")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("22")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("23")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("24")]),_c('br')])]),_c('h2',{attrs:{"id":"读写分离-高可用-多-master"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#读写分离-高可用-多-master"}},[_vm._v("#")]),_vm._v(" 读写分离+高可用+多 master")]),_vm._v(" "),_c('p',[_vm._v("集群安装成功之后，就具有了如下功能：")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("读写分离：每个 master 都有一个 slave")]),_vm._v(" "),_c('li',[_vm._v("高可用：master 宕机，slave 自动被切换过去")]),_vm._v(" "),_c('li',[_vm._v("多 master：横向扩容支持更大数据量")])]),_vm._v(" "),_c('h2',{attrs:{"id":"ruby-的安装"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#ruby-的安装"}},[_vm._v("#")]),_vm._v(" Ruby 的安装")]),_vm._v(" "),_c('h3',{attrs:{"id":"ruby-安装"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#ruby-安装"}},[_vm._v("#")]),_vm._v(" Ruby 安装")]),_vm._v(" "),_c('p',[_vm._v("在 ruby 官网找到一个安装任意版本的工具  "),_c('a',{attrs:{"href":"https://github.com/postmodern/ruby-install#readme","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("ruby-install"),_c('OutboundLink')],1)]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" /ust/local\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 安装 ruby-install")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("wget")]),_vm._v(" -O ruby-install-0.7.0.tar.gz https://github.com/postmodern/ruby-install/archive/v0.7.0.tar.gz\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("tar")]),_vm._v(" -xzvf ruby-install-0.7.0.tar.gz\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" ruby-install-0.7.0/\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("sudo")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("make")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 安装 2.3 版本 ruby，执行后会看到 update runby.. 应该是吧之前 1.8 版本的更新了")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 要等待好长时间，在安装过程中的时候 32% [305/947]  io.c ，947 的进度条。。")]),_vm._v("\nruby-install ruby "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("2.3")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 如果你之前通过 yum 安装过 低版本的 ruby，那么需要移除掉")]),_vm._v("\nyum remove ruby\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 移除之后，发现提示有误")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("[")]),_vm._v("root@eshop-cache01 ruby-2.3.8"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("]")]),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# ruby -v")]),_vm._v("\n-bash: /usr/bin/ruby: No such "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("file")]),_vm._v(" or directory\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 其实在 ruby-install ruby 2.3 安装完成过程中是有显示安装位置的")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 通过 ls 命令 连接到安装目录的 ruby 文件即可")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("ln")]),_vm._v(" -s /usr/local/src/ruby-2.3.8/ruby /usr/bin/ruby  \n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("12")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("13")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("14")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("15")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("16")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("17")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("18")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("19")]),_c('br')])]),_c('blockquote',[_c('p',[_vm._v("以下尝试过好长时间都不能安装上，主要是 rvm 安装不了")])]),_vm._v(" "),_c('p',[_vm._v("解决 gem install redis redis requires Ruby version >= 2.2.2."),_c('a',{attrs:{"href":"https://blog.csdn.net/baiducheng/article/details/77833154","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("报错问题"),_c('OutboundLink')],1)]),_vm._v(" "),_c('p',[_vm._v("或者参考 "),_c('a',{attrs:{"href":"https://www.cnblogs.com/ding2016/p/7903147.html","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("这篇文章"),_c('OutboundLink')],1)]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 安装 curl")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("sudo")]),_vm._v(" yum "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("curl")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 安装 RVM")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# curl -L get.rvm.io | bash -s stable")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# curl -L https://get.rvm.io | bash -s stable")]),_vm._v("\ngpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 我再执行这步骤的时候老是报错 curl returned status '35'. ，下载不下来")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 按照官网的 https://rvm.io/ 方式也是报错")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("curl")]),_vm._v(" -sSL https://get.rvm.io "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("|")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("bash")]),_vm._v(" -s stable\n"),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("source")]),_vm._v(" /usr/local/rvm/scripts/rvm\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 查看 rvm 库中已知的 ruby 版本")]),_vm._v("\nrvm list known\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 安装一个 ruby 版本")]),_vm._v("\nrvm "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("2.3")]),_vm._v(".3\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 使用一个 ruby 版本")]),_vm._v("\nrvm use "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("2.3")]),_vm._v(".3\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 卸载一个已知版本")]),_vm._v("\nrvm remove "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("2.0")]),_vm._v(".0\nruby --version\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# 再安装redis就可以了")]),_vm._v("\ngem "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("install")]),_vm._v(" redis\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("8")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("9")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("10")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("11")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("12")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("13")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("14")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("15")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("16")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("17")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("18")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("19")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("20")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("21")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("22")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("23")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("24")]),_c('br')])]),_c('h3',{attrs:{"id":"rubygems-安装"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#rubygems-安装"}},[_vm._v("#")]),_vm._v(" rubygems 安装")]),_vm._v(" "),_c('p',[_vm._v("安装方式请参考官网：https://rubygems.org/pages/download")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("cd /usr/local\nwget https://rubygems.org/rubygems/rubygems-3.0.3.zip\n# 如果没有安装 zip，请执行 yum install unzip\nunzip rubygems-3.0.3.zip\ncd rubygems-3.0.3\nruby setup.rb\nln -s /usr/local/rubygems-3.0.3/bin/gem /usr/bin/gem\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br')])])])}
var staticRenderFns = []



/***/ })

}]);
//# sourceMappingURL=363.fc96cd09.js.map