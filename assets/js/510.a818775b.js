(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[510],{

/***/ "./docs/git-scm/04/04.md":
/*!*******************************!*\
  !*** ./docs/git-scm/04/04.md ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _04_md_vue_type_template_id_3119b8e0___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./04.md?vue&type=template&id=3119b8e0& */ "./docs/git-scm/04/04.md?vue&type=template&id=3119b8e0&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");

var script = {}


/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
  script,
  _04_md_vue_type_template_id_3119b8e0___WEBPACK_IMPORTED_MODULE_0__["render"],
  _04_md_vue_type_template_id_3119b8e0___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./docs/git-scm/04/04.md?vue&type=template&id=3119b8e0&":
/*!**************************************************************!*\
  !*** ./docs/git-scm/04/04.md?vue&type=template&id=3119b8e0& ***!
  \**************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_04_md_vue_type_template_id_3119b8e0___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib??ref--1-1!../../../node_modules/@vuepress/markdown-loader??ref--1-2!./04.md?vue&type=template&id=3119b8e0& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/git-scm/04/04.md?vue&type=template&id=3119b8e0&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_04_md_vue_type_template_id_3119b8e0___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_2e9acca5_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_04_md_vue_type_template_id_3119b8e0___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"2e9acca5-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./docs/git-scm/04/04.md?vue&type=template&id=3119b8e0&":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"2e9acca5-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??ref--1-1!./node_modules/@vuepress/markdown-loader??ref--1-2!./docs/git-scm/04/04.md?vue&type=template&id=3119b8e0& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{"slot-key":_vm.$parent.slotKey}},[_c('h1',{attrs:{"id":"配置服务器"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#配置服务器"}},[_vm._v("#")]),_vm._v(" 配置服务器")]),_vm._v(" "),_c('p',[_vm._v("我们来看看如何配置 "),_c('strong',[_vm._v("服务器端的 SSH 访问")]),_vm._v("。 本例中，我们将使用 "),_c('code',[_vm._v("authorized_keys")]),_vm._v(" 方法来对用户进行认证。 同时我们假设你使用的操作系统是标准的 Linux 发行版，比如 Ubuntu。 首先，创建一个操作系统用户 git，并为其建立一个 "),_c('code',[_vm._v(".ssh")]),_vm._v(" 目录。")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("$ sudo adduser git\n$ su git\n$ cd\n$ mkdir .ssh && chmod 700 .ssh\n$ touch .ssh/authorized_keys && chmod 600 .ssh/authorized_keys\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br')])]),_c('p',[_vm._v("接着，我们需要为系统用户 git 的 authorized_keys 文件添加一些开发者 SSH 公钥。 假设我们已经获得了若干受信任的公钥，并将它们保存在临时文件中。 与前文类似，这些公钥看起来是这样的：")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("$ cat /tmp/id_rsa.john.pub\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCB007n/ww+ouN4gSLKssMxXnBOvf9LGt4L\nojG6rs6hPB09j9R/T17/x4lhJA0F3FR1rP6kYBRsWj2aThGw6HXLm9/5zytK6Ztg3RPKK+4k\nYjh6541NYsnEAZuXz0jTTyAUfrtU3Z5E003C4oxOj6H0rfIF1kKI9MAQLMdpGW1GYEIgS9Ez\nSdfd8AcCIicTDWbqLAcU4UpkaX8KyGlLwsNuuGztobF8m72ALC/nLF6JLtPofwFBlgc+myiv\nO7TCUSBdLQlgMVOFq1I2uPWQOkOWQAHukEOmfjy2jctxSDBQ220ymjaNsHT4kgtZg2AYYgPq\ndAv8JggJICUvax2T9va5 gsg-keypair\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br')])]),_c('p',[_vm._v("将这些公钥加入系统用户 git 的 "),_c('code',[_vm._v(".ssh")]),_vm._v(" 目录下 authorized_keys 文件的末尾：")]),_vm._v(" "),_c('div',{staticClass:"language- line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-text"}},[_c('code',[_vm._v("$ cat /tmp/id_rsa.john.pub >> ~/.ssh/authorized_keys\n$ cat /tmp/id_rsa.josie.pub >> ~/.ssh/authorized_keys\n$ cat /tmp/id_rsa.jessica.pub >> ~/.ssh/authorized_keys\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br')])]),_c('p',[_vm._v("现在我们来为开发者新建一个空仓库。可以借助带 "),_c('code',[_vm._v("–bare")]),_vm._v("  选项的 "),_c('code',[_vm._v("git init")]),_vm._v(" 命令来做到这一点，"),_c('strong',[_vm._v("该命令在初始化仓库时不会创建工作目录")]),_vm._v("：")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_vm._v("$ "),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" /opt/git\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("mkdir")]),_vm._v(" project.git\n$ "),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" project.git\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v(" init --bare\nInitialized empty Git repository "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("in")]),_vm._v(" /opt/git/project.git/\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br')])]),_c('p',[_vm._v("接着，John、Josie 或者 Jessica 中的任意一人可以将他们项目的最初版本推送到这个仓库中，他只需将此仓库 "),_c('strong',[_vm._v("设置为项目的远程仓库并向其推送分支")]),_vm._v("。 请注意，每添加一个新项目，都需要有人登录服务器取得 shell，并创建一个裸仓库。 我们假定这个设置了 git 用户和 Git 仓库的服务器使用 gitserver 作为主机名。 同时，假设该服务器运行在内网，并且你已在 DNS 配置中将 gitserver 指向此服务器。那么我们可以运行如下命令（假定 myproject 是已有项目且其中已包含文件）：")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# on John's computer")]),_vm._v("\n$ "),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" myproject\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v(" init\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("add")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v(".")]),_vm._v("\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v(" commit -m "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("'initial commit'")]),_vm._v("\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v(" remote "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("add")]),_vm._v(" origin git@gitserver:/opt/git/project.git\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v(" push origin master\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("6")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("7")]),_c('br')])]),_c('p',[_vm._v("此时，其他开发者可以克隆此仓库，并推回各自的改动，步骤很简单：")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_vm._v("$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v(" clone git@gitserver:/opt/git/project.git\n$ "),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("cd")]),_vm._v(" project\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("vim")]),_vm._v(" README\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v(" commit -am "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("'fix for the README file'")]),_vm._v("\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v(" push origin master\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("5")]),_c('br')])]),_c('p',[_vm._v("通过这种方法，你可以快速搭建一个具有读写权限、面向多个开发者的 Git 服务器。")]),_vm._v(" "),_c('p',[_vm._v("需要注意的是，"),_c('strong',[_vm._v("目前所有（获得授权的）开发者用户都能以系统用户 git 的身份登录服务器从而获得一个普通 shell")]),_vm._v("。 如果你想对此加以限制，则需要修改 passwd 文件中（git 用户所对应）的 shell 值。")]),_vm._v(" "),_c('p',[_vm._v("借助一个名为 git-shell 的受限 shell 工具，你可以方便地将用户 git 的活动限制在与 Git 相关的范围内。该工具随 Git 软件包一同提供。 如果将 git-shell 设置为用户 git 的登录 shell（login shell），那么用户 git 便不能获得此服务器的普通 shell 访问权限。 若要使用 git-shell，需要用它替换掉 bash 或 csh，使其成为系统用户的登录 shell。 为进行上述操作，首先你必须确保 git-shell 已存在于 "),_c('code',[_vm._v("/etc/shells")]),_vm._v(" 文件中：")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_vm._v("$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("cat")]),_vm._v(" /etc/shells   "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# see if `git-shell` is already in there.  If not...")]),_vm._v("\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("which")]),_vm._v(" git-shell   "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# make sure git-shell is installed on your system.")]),_vm._v("\n$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("sudo")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("vim")]),_vm._v(" /etc/shells  "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# and add the path to git-shell from last command")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br')])]),_c('p',[_vm._v("现在你可以使用 "),_c('code',[_vm._v("chsh <username>")]),_vm._v(" 命令修改任一系统用户的 shell：")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_vm._v("$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("sudo")]),_vm._v(" chsh "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v("  "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("# and enter the path to git-shell, usually: /usr/bin/git-shell")]),_vm._v("\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br')])]),_c('p',[_vm._v("这样，用户 git 就只能利用 SSH 连接对 Git 仓库进行推送和拉取操作，而不能登录机器并取得普通 shell。 如果试图登录，你会发现尝试被拒绝，像这样：")]),_vm._v(" "),_c('div',{staticClass:"language-bash line-numbers-mode"},[_c('pre',{pre:true,attrs:{"class":"language-bash"}},[_c('code',[_vm._v("$ "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("ssh")]),_vm._v(" git@gitserver\nfatal: Interactive "),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("git")]),_vm._v(" shell is not enabled.\nhint: ~/git-shell-commands should exist and have "),_c('span',{pre:true,attrs:{"class":"token builtin class-name"}},[_vm._v("read")]),_vm._v(" and execute access.\nConnection to gitserver closed.\n")])]),_vm._v(" "),_c('div',{staticClass:"line-numbers-wrapper"},[_c('span',{staticClass:"line-number"},[_vm._v("1")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("2")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("3")]),_c('br'),_c('span',{staticClass:"line-number"},[_vm._v("4")]),_c('br')])]),_c('p',[_vm._v("现在，网络相关的 Git 命令依然能够正常工作，但是开发者用户已经无法得到一个普通 shell 了。 正如输出信息所提示的，你也可以在 git 用户的家目录下建立一个目录，来对 git-shell 命令进行一定程度的自定义。 比如，你可以限制掉某些本应被服务器接受的 Git 命令，或者对刚才的 SSH 拒绝登录信息进行自定义，这样，当有开发者用户以类似方式尝试登录时，便会看到你的信息。 要了解更多有关自定义 shell 的信息，请运行 git help shell。")])])}
var staticRenderFns = []



/***/ })

}]);
//# sourceMappingURL=510.a818775b.js.map